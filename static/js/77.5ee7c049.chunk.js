"use strict";(self.webpackChunknote_sharing_app_client=self.webpackChunknote_sharing_app_client||[]).push([[77],{3077:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Re});var n=r(5043),a=r(8903),i=r(6446),o=r(8168),s=r(8587),l=r(8387);const c=e=>{const t=n.useRef({});return n.useEffect((()=>{t.current=e})),t.current};var d=r(5049);var u=r(9921),m=r(2876);var p=r(4535),h=r(9848),g=r(4987),A=r(239);function f(e){return(0,A.Ay)("MuiBadge",e)}const y=(0,g.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]);var x=r(579);const v=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],P=m.A,T=(0,p.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),E=(0,p.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.badge,t[r.variant],t[`anchorOrigin${(0,h.A)(r.anchorOrigin.vertical)}${(0,h.A)(r.anchorOrigin.horizontal)}${(0,h.A)(r.overlap)}`],"default"!==r.color&&t[`color${(0,h.A)(r.color)}`],r.invisible&&t.invisible]}})((e=>{let{theme:t}=e;var r;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(r=t.vars)?r:t).palette).filter((e=>{var r,n;return(null!=(r=t.vars)?r:t).palette[e].main&&(null!=(n=t.vars)?n:t).palette[e].contrastText})).map((e=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${y.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${y.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${y.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"rectangular"===t.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${y.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${y.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"right"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${y.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${y.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchorOrigin.vertical&&"left"===t.anchorOrigin.horizontal&&"circular"===t.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${y.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}})),C=n.forwardRef((function(e,t){var r,n,a,i,m,p;const g=P({props:e,name:"MuiBadge"}),{anchorOrigin:A={vertical:"top",horizontal:"right"},className:y,component:C,components:_={},componentsProps:O={},children:b,overlap:R="rectangular",color:I="default",invisible:D=!1,max:S=99,badgeContent:w,slots:j,slotProps:L,showZero:Y=!1,variant:N="standard"}=g,W=(0,s.A)(g,v),{badgeContent:M,invisible:k,max:U,displayValue:B}=function(e){const{badgeContent:t,invisible:r=!1,max:n=99,showZero:a=!1}=e,i=c({badgeContent:t,max:n});let o=r;!1!==r||0!==t||a||(o=!0);const{badgeContent:s,max:l=n}=o?i:e;return{badgeContent:s,invisible:o,max:l,displayValue:s&&Number(s)>l?`${l}+`:s}}({max:S,invisible:D,badgeContent:w,showZero:Y}),z=c({anchorOrigin:A,color:I,overlap:R,variant:N,badgeContent:w}),$=k||null==M&&"dot"!==N,{color:H=I,overlap:F=R,anchorOrigin:K=A,variant:q=N}=$?z:g,X="dot"!==q?B:void 0,G=(0,o.A)({},g,{badgeContent:M,invisible:$,max:U,displayValue:X,showZero:Y,anchorOrigin:K,color:H,overlap:F,variant:q}),V=(e=>{const{color:t,anchorOrigin:r,invisible:n,overlap:a,variant:i,classes:o={}}=e,s={root:["root"],badge:["badge",i,n&&"invisible",`anchorOrigin${(0,h.A)(r.vertical)}${(0,h.A)(r.horizontal)}`,`anchorOrigin${(0,h.A)(r.vertical)}${(0,h.A)(r.horizontal)}${(0,h.A)(a)}`,`overlap${(0,h.A)(a)}`,"default"!==t&&`color${(0,h.A)(t)}`]};return(0,d.A)(s,f,o)})(G),J=null!=(r=null!=(n=null==j?void 0:j.root)?n:_.Root)?r:T,Q=null!=(a=null!=(i=null==j?void 0:j.badge)?i:_.Badge)?a:E,Z=null!=(m=null==L?void 0:L.root)?m:O.root,ee=null!=(p=null==L?void 0:L.badge)?p:O.badge,te=(0,u.Q)({elementType:J,externalSlotProps:Z,externalForwardedProps:W,additionalProps:{ref:t,as:C},ownerState:G,className:(0,l.A)(null==Z?void 0:Z.className,V.root,y)}),re=(0,u.Q)({elementType:Q,externalSlotProps:ee,ownerState:G,className:(0,l.A)(V.badge,null==ee?void 0:ee.className)});return(0,x.jsxs)(J,(0,o.A)({},te,{children:[b,(0,x.jsx)(Q,(0,o.A)({},re,{children:X}))]}))}));var _=r(2110),O=r(6494),b=r(5865),R=r(3845),I=r(7600),D=r(3438),S=r(7392),w=r(279),j=r(9252),L=r(547),Y=r(7784),N=r(1787),W=r(3193),M=r(9190),k=r(598),U=r(2143),B=r(3336),z=r(4912),$=r(4056),H=r(35),F=r(6600),K=r(5316),q=r(4605),X=r(7843),G=r(9347),V=r(9662);const J=(0,V.A)((0,x.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment");var Q=r(4694);const Z=(0,V.A)((0,x.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications");var ee=r(3560),te=r(3768),re=r(2101),ne=r(8293);const ae=(0,V.A)((0,x.jsx)("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14zM7 10h5v5H7z"}),"Today");var ie=r(141),oe=r(9484),se=r(7332);const le=(0,V.A)((0,x.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");var ce=r(5626),de=r(6649),ue=r(3216),me=r(5475),pe=r(446),he=r.n(pe),ge=r(5016),Ae=r(5404),fe=r(5460);const ye="69181c670024df0dd32b",xe={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_REMINDERS||"691f989400364a8670d8";const ve={createReminder:async function(e,t){try{const{title:r,description:n,date:a,time:i,notification:o,priority:s,assignedTo:l=[],recurring:c=null}=t;let d;if("string"===typeof a&&a.includes("T"))d=new Date(a);else if(i){const e="string"===typeof a?a:a.format("YYYY-MM-DD"),t="string"===typeof i?i:i.format("HH:mm");d=new Date(`${e}T${t}`)}else{const e="string"===typeof a?a:a.format("YYYY-MM-DD");d=new Date(`${e}T12:00`)}if(isNaN(d.getTime()))throw new Error("Invalid date or time value");return await Ae.LL.createDocument(ye,xe,fe.ID.unique(),{ownerId:e,title:r.trim(),description:n||"",date:d.toISOString(),notification:!1!==o,priority:s||"medium",assignedTo:Array.isArray(l)?l:[],recurring:c||null})}catch(r){throw console.error("Error creating reminder:",r),r}},listReminders:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=[fe.XK.equal("ownerId",e)],n=(await Ae.LL.listDocuments(ye,xe,r)).documents||[];if(!t)return n;const a=new Date(t),i=a.getDate(),o=a.getMonth(),s=a.getFullYear(),l=a.getDay();return n.filter((e=>{const t=new Date(e.date),r=t.getDate(),n=t.getMonth(),c=t.getFullYear(),d=t.getDay();if(r===i&&n===o&&c===s)return!0;if(e.recurring)switch(e.recurring){case"daily":return t<=a;case"weekly":return d===l&&t<=a;case"monthly":return r===i&&t<=a;case"yearly":return r===i&&n===o&&t<=a;default:return!1}return!1}))}catch(r){return 404===r.code?(console.warn("Reminders collection not set up yet"),[]):(console.error("Error listing reminders:",r),[])}},updateReminder:async function(e,t){try{const{title:r,description:n,date:a,time:i,notification:o,priority:s,assignedTo:l,recurring:c}=t;let d;if("string"===typeof a&&a.includes("T"))d=new Date(a);else if(i){const e="string"===typeof a?a:a.format("YYYY-MM-DD"),t="string"===typeof i?i:i.format("HH:mm");d=new Date(`${e}T${t}`)}else{const e="string"===typeof a?a:a.format("YYYY-MM-DD");d=new Date(`${e}T12:00`)}if(isNaN(d.getTime()))throw new Error("Invalid date or time value");const u={title:r.trim(),description:n||"",date:d.toISOString(),notification:!1!==o,priority:s||"medium"};return void 0!==l&&(u.assignedTo=Array.isArray(l)?l:[]),void 0!==c&&(u.recurring=c||null),await Ae.LL.updateDocument(ye,xe,e,u)}catch(r){throw console.error("Failed to update reminder:",r),r}},deleteReminder:async function(e){try{return await Ae.LL.deleteDocument(ye,xe,e)}catch(t){throw console.warn("Failed to delete reminder"),t}}};var Pe=r(6931),Te=r(4155),Ee=r(9511);async function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=[];try{(await ve.listReminders(e,t)).forEach((e=>{n.push({type:"reminder",id:e.$id,title:e.title,description:e.description,date:e.date,time:he()(e.date).format("HH:mm"),priority:e.priority||"medium",notification:e.notification,assignedTo:e.assignedTo||[],recurring:e.recurring,ownerId:e.ownerId,source:"reminder"})}))}catch(r){console.warn("[CalendarData] Error fetching reminders:",r)}try{const a=(await Ee.default.listProjects(e)).map((e=>e.$id));for(const e of a)try{(await Te.Ay.listTasks(e)).forEach((e=>{if(e.dueDate){const r=he()(e.dueDate).format("YYYY-MM-DD");if(t&&r!==t)return;n.push({type:"task",id:e.$id,title:e.title,description:e.description,date:e.dueDate,time:he()(e.dueDate).format("HH:mm"),priority:e.priority||"Medium",status:e.status,projectId:e.projectId,assignedTo:[],recurring:null,ownerId:e.createdBy,source:"task",isOverdue:new Date(e.dueDate)<new Date&&"Completed"!==e.status})}}))}catch(r){console.warn(`[CalendarData] Error fetching tasks for project ${e}:`,r)}}catch(r){console.warn("[CalendarData] Error fetching projects:",r)}return n.sort(((e,t)=>new Date(e.date)-new Date(t.date))),n}catch(r){return console.error("[CalendarData] Error getting calendar items:",r),[]}}const _e={getCalendarItems:Ce,getDayItems:async function(e,t){return Ce(e,t)},getUpcomingItems:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;try{const r=await Ce(e),n=he()().startOf("day"),a=n.add(t,"day");return r.filter((e=>{const t=he()(e.date).startOf("day");return t.isAfter(n.subtract(1,"day"))&&t.isBefore(a.add(1,"day"))}))}catch(r){return console.error("[CalendarData] Error getting upcoming items:",r),[]}},getOverdueItems:async function(e){try{const t=await Ce(e),r=he()().startOf("day");return t.filter((e=>{const t=he()(e.date).startOf("day").isBefore(r),n="task"===e.type&&"Completed"===e.status;return t&&!n}))}catch(t){return console.error("[CalendarData] Error getting overdue items:",t),[]}},getItemsByDateRange:async function(e,t,r){try{const n=await Ce(e),a=he()(t).startOf("day"),i=he()(r).endOf("day"),o=n.filter((e=>{const t=he()(e.date).startOf("day");return t.isAfter(a.subtract(1,"day"))&&t.isBefore(i.add(1,"day"))})),s={};return o.forEach((e=>{const t=he()(e.date).format("YYYY-MM-DD");s[t]||(s[t]=[]),s[t].push(e)})),s}catch(n){return console.error("[CalendarData] Error getting items by date range:",n),{}}}};var Oe=r(3248),be=r(7097);const Re=()=>{const{user:e}=(0,ge.A)(),t=(0,ue.Zp)(),[r]=(0,me.ok)(),o=r.get("date"),s=o?he()(o):he()(),[l,c]=(0,n.useState)(s),[d,u]=(0,n.useState)(s),[m,p]=(0,n.useState)(!1),h=(0,Oe.jE)(),[g,A]=(0,n.useState)(null),[f,y]=(0,n.useState)(""),[v,P]=(0,n.useState)(""),[T,E]=(0,n.useState)(!1),[V,pe]=(0,n.useState)([]),[fe,ye]=(0,n.useState)(0),[xe,Te]=(0,n.useState)("all"),[Ee,Ce]=(0,n.useState)("all"),[Re,Ie]=(0,n.useState)(""),[De,Se]=(0,n.useState)({}),[we,je]=(0,n.useState)({title:"",description:"",date:he()().format("YYYY-MM-DD"),time:"12:00",notification:!0,priority:"medium",assignedTo:[],recurring:null}),[Le,Ye]=(0,n.useState)("");(0,n.useEffect)((()=>{null!==e&&void 0!==e&&e.$id&&(async()=>{try{const e="6918f632002d42536ab2",t="69181c670024df0dd32b",r=await Ae.LL.listDocuments(t,e);pe(r.documents||[])}catch(e){console.error("Failed to load users:",e)}})()}),[null===e||void 0===e?void 0:e.$id]);const Ne=d.startOf("month"),We=d.endOf("month"),{data:Me=[],isLoading:ke}=((e,t)=>{const r=t?he()(t).format("YYYY-MM-DD"):he()().format("YYYY-MM-DD");return(0,Pe.I)({queryKey:["calendar","dayItems",e,r],queryFn:async()=>await _e.getDayItems(e,r),enabled:!!e,staleTime:6e4})})(null===e||void 0===e?void 0:e.$id,l),{data:Ue=[],isLoading:Be}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return(0,Pe.I)({queryKey:["calendar","upcoming",e,t],queryFn:async()=>await _e.getUpcomingItems(e,t),enabled:!!e,staleTime:12e4})}(null===e||void 0===e?void 0:e.$id,7),{data:ze=[],isLoading:$e}=(He=null===e||void 0===e?void 0:e.$id,(0,Pe.I)({queryKey:["calendar","overdue",He],queryFn:async()=>await _e.getOverdueItems(He),enabled:!!He,staleTime:12e4}));var He;const{data:Fe={},isLoading:Ke}=((e,t,r)=>{const n=t?he()(t).format("YYYY-MM-DD"):null,a=r?he()(r).format("YYYY-MM-DD"):null;return(0,Pe.I)({queryKey:["calendar","monthItems",e,n,a],queryFn:async()=>await _e.getItemsByDateRange(e,n,a),enabled:!!e&&!!n&&!!a,staleTime:3e5})})(null===e||void 0===e?void 0:e.$id,Ne.format("YYYY-MM-DD"),We.format("YYYY-MM-DD")),qe=(0,be.n)({mutationFn:async t=>await ve.createReminder(e.$id,t),onSuccess:()=>{h.invalidateQueries(["calendar"]),P("Reminder created successfully"),setTimeout((()=>P("")),3e3)},onError:e=>{y((null===e||void 0===e?void 0:e.message)||"Failed to create reminder")}}),Xe=(0,be.n)({mutationFn:async e=>{let{reminderId:t,reminderData:r}=e;return await ve.updateReminder(t,r)},onSuccess:()=>{h.invalidateQueries(["calendar"]),P("Reminder updated successfully"),setTimeout((()=>P("")),3e3)},onError:e=>{y((null===e||void 0===e?void 0:e.message)||"Failed to update reminder")}}),Ge=(0,be.n)({mutationFn:async e=>await ve.deleteReminder(e),onSuccess:()=>{h.invalidateQueries(["calendar"]),P("Reminder deleted successfully"),setTimeout((()=>P("")),3e3)},onError:e=>{y((null===e||void 0===e?void 0:e.message)||"Failed to delete reminder")}});(0,n.useEffect)((()=>{const e="/calendar"+(l.format("YYYY-MM-DD")!==he()().format("YYYY-MM-DD")?`?date=${l.format("YYYY-MM-DD")}`:"");window.history.replaceState({},"",e)}),[l]);const Ve=e=>{c(e),u(e)},Je=e=>{const t="next"===e?d.add(1,"month"):d.subtract(1,"month");u(t),c(t)},Qe=e=>{const{name:t,value:r,checked:n}=e.target;je((e=>({...e,[t]:"notification"===t?n:r})))},Ze=()=>{if(!Le.trim())return;const e=V.find((e=>{var t;return(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())===Le.toLowerCase()}));return e?we.assignedTo.some((t=>t===e.userId))?(y("User is already assigned"),void setTimeout((()=>y("")),3e3)):(je((t=>({...t,assignedTo:[...t.assignedTo,e.userId]}))),void Ye("")):(y("User not found with that email"),void setTimeout((()=>y("")),3e3))},et=e=>e.map((e=>{const t=V.find((t=>t.userId===e));return(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.email)||e})),tt=e=>e.filter((e=>{if("reminders"===xe&&"reminder"!==e.type)return!1;if("tasks"===xe&&"task"!==e.type)return!1;if("all"!==Ee){var t;const r=null===(t=e.priority)||void 0===t?void 0:t.toLowerCase();if("high"===Ee&&"high"!==r)return!1;if("medium"===Ee&&"medium"!==r)return!1;if("low"===Ee&&"low"!==r)return!1}if(Re){var r,n;const t=Re.toLowerCase();if((null===(r=e.title)||void 0===r||!r.toLowerCase().includes(t))&&(null===(n=e.description)||void 0===n||!n.toLowerCase().includes(t)))return!1}return!0})),rt=e=>{const r="task"===e.type,n=e.isOverdue;return(0,x.jsxs)(_.A,{sx:{mb:2,borderRadius:2,boxShadow:2,borderLeft:"4px solid "+(n?"#d32f2f":"high"===e.priority||"High"===e.priority||"Critical"===e.priority?"#f57c00":"medium"===e.priority||"Medium"===e.priority?"#fbc02d":"#388e3c"),transition:"all 0.2s ease-in-out","&:hover":{boxShadow:4,transform:"translateY(-2px)"}},children:[(0,x.jsxs)(O.A,{sx:{pb:1},children:[(0,x.jsxs)(i.A,{sx:{display:"flex",alignItems:"flex-start",mb:1},children:[r?(0,x.jsx)(J,{sx:{mr:1,color:"primary.main",mt:.5},fontSize:"small"}):(0,x.jsx)(Q.A,{sx:{mr:1,color:"primary.main",mt:.5},fontSize:"small"}),(0,x.jsxs)(i.A,{sx:{flexGrow:1},children:[(0,x.jsx)(b.A,{variant:"h6",sx:{fontWeight:"medium",color:"text.primary"},children:e.title}),r&&(0,x.jsx)(R.A,{label:e.status,size:"small",sx:{mt:.5,fontSize:"0.7rem",height:"20px"},color:"Completed"===e.status?"success":"default"})]}),(0,x.jsx)(R.A,{label:e.priority,size:"small",sx:{fontWeight:"medium",fontSize:"0.7rem"},color:"high"===e.priority||"High"===e.priority||"Critical"===e.priority?"error":"medium"===e.priority||"Medium"===e.priority?"warning":"success"})]}),e.description&&(0,x.jsx)(b.A,{variant:"body2",sx:{color:"text.secondary",mb:1.5,ml:4},children:e.description}),e.assignedTo&&e.assignedTo.length>0&&(0,x.jsxs)(i.A,{sx:{mb:1,ml:4},children:[(0,x.jsx)(b.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Assigned to:"}),(0,x.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:et(e.assignedTo).map(((e,t)=>(0,x.jsx)(R.A,{label:e,size:"small",sx:{fontSize:"0.7rem",height:"20px"}},t)))})]}),e.recurring&&(0,x.jsx)(R.A,{label:`Repeats: ${e.recurring}`,size:"small",color:"info",sx:{mb:1,ml:4,fontSize:"0.7rem"}}),(0,x.jsxs)(i.A,{sx:{mt:1,display:"flex",alignItems:"center",gap:1,color:"text.secondary",ml:4},children:[(0,x.jsx)(Z,{color:e.notification?"primary":"disabled",fontSize:"small"}),(0,x.jsx)(b.A,{variant:"body2",children:he()(e.date).format("h:mm A")}),n&&(0,x.jsx)(R.A,{label:"Overdue",size:"small",color:"error",sx:{fontSize:"0.7rem",height:"20px"}})]})]}),(0,x.jsx)(I.A,{sx:{px:2,pb:2},children:r?(0,x.jsx)(D.A,{size:"small",onClick:()=>t(`/projects/${e.projectId}/tasks/${e.id}`),sx:{textTransform:"none"},children:"View Task"}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(S.A,{size:"small",onClick:()=>(e=>{"reminder"===e.type?(A(e),je({title:e.title,description:e.description||"",date:he()(e.date).format("YYYY-MM-DD"),time:he()(e.date).format("HH:mm"),notification:e.notification,priority:e.priority,assignedTo:e.assignedTo||[],recurring:e.recurring||null}),Ye(""),p(!0)):"task"===e.type&&t(`/projects/${e.projectId}/tasks/${e.id}`)})(e),sx:{"&:hover":{color:"primary.main",backgroundColor:"primary.lighter"}},children:(0,x.jsx)(ee.A,{fontSize:"small"})}),(0,x.jsx)(S.A,{size:"small",onClick:()=>(async e=>{if("reminder"===e.type){if(!window.confirm("Are you sure you want to delete this reminder?"))return;Ge.mutate(e.id)}})(e),sx:{"&:hover":{color:"error.main",backgroundColor:"error.lighter"}},children:(0,x.jsx)(te.A,{fontSize:"small"})})]})})]},e.id)},nt=tt(Me),at=tt(Ue),it=tt(ze);return(0,x.jsxs)(j.A,{maxWidth:"lg",sx:{py:4},children:[(0,x.jsxs)(i.A,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid",borderColor:"divider",pb:2},children:[(0,x.jsx)(b.A,{variant:"h4",sx:{fontWeight:"bold",color:"primary.main"},children:"Calendar & Tasks"}),(0,x.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[(0,x.jsx)(D.A,{variant:"outlined",startIcon:(0,x.jsx)(ae,{}),onClick:()=>{const e=he()();c(e),u(e)},sx:{borderRadius:1,textTransform:"none"},children:"Today"}),(0,x.jsx)(D.A,{variant:"contained",startIcon:(0,x.jsx)(ie.A,{}),onClick:()=>{A(null),je({title:"",description:"",date:l.format("YYYY-MM-DD"),time:"12:00",notification:!0,priority:"medium",assignedTo:[],recurring:null}),Ye(""),p(!0)},sx:{borderRadius:2,textTransform:"none"},children:"Add Reminder"})]})]}),f&&(0,x.jsx)(L.A,{severity:"error",sx:{mb:2},onClose:()=>y(""),children:f}),v&&(0,x.jsx)(L.A,{severity:"success",sx:{mb:2},onClose:()=>P(""),children:v}),(0,x.jsxs)(i.A,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[(0,x.jsx)(Y.A,{placeholder:"Search...",value:Re,onChange:e=>Ie(e.target.value),InputProps:{startAdornment:(0,x.jsx)(N.A,{position:"start",children:(0,x.jsx)(oe.A,{})})},sx:{flexGrow:1,minWidth:200},size:"small"}),(0,x.jsxs)(W.A,{size:"small",sx:{minWidth:150},children:[(0,x.jsx)(M.A,{children:"Type"}),(0,x.jsxs)(k.A,{value:xe,onChange:e=>Te(e.target.value),label:"Type",children:[(0,x.jsx)(U.A,{value:"all",children:"All"}),(0,x.jsx)(U.A,{value:"reminders",children:"Reminders"}),(0,x.jsx)(U.A,{value:"tasks",children:"Tasks"})]})]}),(0,x.jsxs)(W.A,{size:"small",sx:{minWidth:150},children:[(0,x.jsx)(M.A,{children:"Priority"}),(0,x.jsxs)(k.A,{value:Ee,onChange:e=>Ce(e.target.value),label:"Priority",children:[(0,x.jsx)(U.A,{value:"all",children:"All"}),(0,x.jsx)(U.A,{value:"high",children:"High"}),(0,x.jsx)(U.A,{value:"medium",children:"Medium"}),(0,x.jsx)(U.A,{value:"low",children:"Low"})]})]})]}),(0,x.jsxs)(a.Ay,{container:!0,spacing:4,children:[(0,x.jsx)(a.Ay,{item:!0,xs:12,md:8,children:(0,x.jsxs)(B.A,{elevation:3,sx:{p:3,borderRadius:2,backgroundColor:"background.paper",transition:"all 0.3s ease-in-out","&:hover":{boxShadow:6}},children:[(0,x.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,x.jsx)(S.A,{onClick:()=>Je("prev"),children:(0,x.jsx)(se.A,{})}),(0,x.jsx)(b.A,{variant:"h6",sx:{fontWeight:"bold"},children:d.format("MMMM YYYY")}),(0,x.jsx)(S.A,{onClick:()=>Je("next"),children:(0,x.jsx)(le,{})})]}),(0,x.jsx)(i.A,{sx:{mb:2},children:(0,x.jsx)(Y.A,{fullWidth:!0,label:"Selected Date",type:"date",value:l.format("YYYY-MM-DD"),onChange:e=>Ve(he()(e.target.value)),InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})}),(0,x.jsxs)(a.Ay,{container:!0,spacing:.5,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>(0,x.jsx)(a.Ay,{item:!0,xs:1.714,children:(0,x.jsx)(i.A,{sx:{p:1,textAlign:"center",fontWeight:"bold",color:"primary.dark"},children:e})},e))),(()=>{const e=d.startOf("month"),t=d.endOf("month"),r=e.startOf("week"),n=t.endOf("week"),o=[];let s=r;for(;s.isBefore(n)||s.isSame(n,"day");)o.push(s),s=s.add(1,"day");return o.map(((e,t)=>{const r=(e=>{const t=e.format("YYYY-MM-DD");return(Fe[t]||[]).length})(e),n=(e=>{const t=e.format("YYYY-MM-DD"),r=Fe[t]||[];if(0===r.length)return null;const n=r.some((e=>{var t;return"high"===(null===(t=e.priority)||void 0===t?void 0:t.toLowerCase())||"High"===e.priority||"Critical"===e.priority}));return r.some((e=>e.isOverdue))||n?"error":r.some((e=>{var t;return"medium"===(null===(t=e.priority)||void 0===t?void 0:t.toLowerCase())||"Medium"===e.priority}))?"warning":"success"})(e),o=e.isSame(he()(),"day"),s=e.isSame(l,"day");return(0,x.jsx)(a.Ay,{item:!0,xs:1.714,children:(0,x.jsxs)(i.A,{onClick:()=>Ve(e),sx:{p:1,textAlign:"center",cursor:"pointer",borderRadius:1,position:"relative",backgroundColor:s?"primary.main":e.month()!==d.month()?"action.hover":"transparent",color:s?"white":e.month()!==d.month()?"text.secondary":"text.primary",fontWeight:s||o?"bold":"normal",border:o&&!s?"2px solid":"none",borderColor:o&&!s?"primary.main":"transparent","&:hover":{backgroundColor:s?"primary.dark":"action.selected"}},children:[e.date(),r>0&&(0,x.jsx)(C,{badgeContent:r,color:n||"default",sx:{position:"absolute",top:2,right:2,"& .MuiBadge-badge":{fontSize:"0.6rem",minWidth:"16px",height:"16px",padding:"0 4px"}}})]})},t)}))})()]})]})}),(0,x.jsxs)(a.Ay,{item:!0,xs:12,md:4,children:[(0,x.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,x.jsxs)(z.A,{value:fe,onChange:(e,t)=>ye(t),children:[(0,x.jsx)($.A,{label:"Today"}),(0,x.jsx)($.A,{label:"Upcoming"}),(0,x.jsx)($.A,{label:"Overdue"})]})}),0===fe&&(0,x.jsxs)(i.A,{children:[(0,x.jsx)(b.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",mb:2},children:l.format("MMMM D, YYYY")}),0===nt.length?(0,x.jsx)(b.A,{color:"text.secondary",sx:{textAlign:"center",py:4},children:"No items for this day"}):nt.map((e=>rt(e)))]}),1===fe&&(0,x.jsxs)(i.A,{children:[(0,x.jsx)(b.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",mb:2},children:"Next 7 Days"}),0===at.length?(0,x.jsx)(b.A,{color:"text.secondary",sx:{textAlign:"center",py:4},children:"No upcoming items"}):(()=>{const e={};at.forEach((t=>{const r=he()(t.date).format("YYYY-MM-DD");e[r]||(e[r]=[]),e[r].push(t)}));const t=Object.keys(e).sort();return(0,x.jsx)(i.A,{children:0===t.length?(0,x.jsx)(b.A,{color:"text.secondary",sx:{textAlign:"center",py:4},children:"No upcoming items"}):t.map((t=>{const r=e[t];if(0===r.length)return null;const n=he()(t),a=De[t];return(0,x.jsxs)(i.A,{sx:{mb:2},children:[(0,x.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1.5,bgcolor:"action.hover",borderRadius:1,cursor:"pointer","&:hover":{bgcolor:"action.selected"}},onClick:()=>Se((e=>({...e,[t]:!e[t]}))),children:[(0,x.jsxs)(b.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:[n.format("MMMM D, YYYY")," (",r.length," ",1===r.length?"item":"items",")"]}),a?(0,x.jsx)(re.A,{}):(0,x.jsx)(ne.A,{})]}),(0,x.jsx)(w.A,{in:a,children:(0,x.jsx)(i.A,{sx:{mt:1},children:r.map((e=>rt(e)))})})]},t)}))})})()]}),2===fe&&(0,x.jsxs)(i.A,{children:[(0,x.jsx)(b.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",mb:2},children:"Overdue Items"}),0===it.length?(0,x.jsx)(b.A,{color:"text.secondary",sx:{textAlign:"center",py:4},children:"No overdue items"}):it.map((e=>rt(e)))]})]})]}),(0,x.jsxs)(H.A,{open:m,onClose:()=>p(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:24}},children:[(0,x.jsx)(F.A,{sx:{pb:2,borderBottom:"1px solid",borderColor:"divider"},children:g?"Edit Reminder":"New Reminder"}),(0,x.jsx)(K.A,{children:(0,x.jsxs)(i.A,{sx:{pt:3,display:"flex",flexDirection:"column",gap:2.5},children:[(0,x.jsx)(Y.A,{fullWidth:!0,label:"Title",name:"title",value:we.title,onChange:Qe,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,x.jsx)(Y.A,{fullWidth:!0,label:"Description",name:"description",multiline:!0,rows:3,value:we.description,onChange:Qe,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,x.jsx)(Y.A,{fullWidth:!0,label:"Date",type:"date",name:"date",value:we.date,onChange:Qe,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,x.jsx)(Y.A,{fullWidth:!0,label:"Time",type:"time",name:"time",value:we.time,onChange:Qe,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,x.jsxs)(W.A,{fullWidth:!0,children:[(0,x.jsx)(M.A,{children:"Priority"}),(0,x.jsxs)(k.A,{name:"priority",value:we.priority,onChange:Qe,label:"Priority",sx:{borderRadius:1},children:[(0,x.jsx)(U.A,{value:"low",children:"Low"}),(0,x.jsx)(U.A,{value:"medium",children:"Medium"}),(0,x.jsx)(U.A,{value:"high",children:"High"})]})]}),(0,x.jsxs)(W.A,{fullWidth:!0,children:[(0,x.jsx)(M.A,{children:"Repeat"}),(0,x.jsxs)(k.A,{name:"recurring",value:we.recurring||"",onChange:Qe,label:"Repeat",sx:{borderRadius:1},children:[(0,x.jsx)(U.A,{value:"",children:"Never"}),(0,x.jsx)(U.A,{value:"daily",children:"Daily"}),(0,x.jsx)(U.A,{value:"weekly",children:"Weekly"}),(0,x.jsx)(U.A,{value:"monthly",children:"Monthly"}),(0,x.jsx)(U.A,{value:"yearly",children:"Yearly"})]})]}),(0,x.jsxs)(i.A,{children:[(0,x.jsx)(b.A,{variant:"subtitle2",sx:{mb:1},children:"Assign to People"}),(0,x.jsxs)(i.A,{sx:{display:"flex",gap:1,mb:1},children:[(0,x.jsx)(Y.A,{fullWidth:!0,size:"small",placeholder:"Enter email address",value:Le,onChange:e=>Ye(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Ze())}}),(0,x.jsx)(D.A,{variant:"outlined",startIcon:(0,x.jsx)(ce.A,{}),onClick:Ze,size:"small",children:"Add"})]}),we.assignedTo.length>0&&(0,x.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:et(we.assignedTo).map(((e,t)=>(0,x.jsx)(R.A,{label:e,size:"small",onDelete:()=>(e=>{je((t=>({...t,assignedTo:t.assignedTo.filter((t=>t!==e))})))})(we.assignedTo[t]),deleteIcon:(0,x.jsx)(de.A,{})},we.assignedTo[t])))})]}),(0,x.jsx)(q.A,{control:(0,x.jsx)(X.A,{checked:we.notification,onChange:Qe,name:"notification",color:"primary"}),label:"Enable Notifications"})]})}),(0,x.jsxs)(G.A,{sx:{px:3,py:2,gap:1},children:[(0,x.jsx)(D.A,{onClick:()=>p(!1),sx:{borderRadius:1,textTransform:"none"},children:"Cancel"}),(0,x.jsx)(D.A,{onClick:async t=>{if(t.preventDefault(),null===e||void 0===e||!e.$id)return void y("Not authenticated");if(!we.title.trim())return void y("Title is required");y(""),P("");const r={title:we.title,description:we.description,date:we.date,time:we.time,notification:we.notification,priority:we.priority,assignedTo:we.assignedTo||[],recurring:we.recurring||null};g?Xe.mutate({reminderId:g.id,reminderData:r}):qe.mutate(r),p(!1)},variant:"contained",disabled:qe.isLoading||Xe.isLoading||!we.title.trim(),sx:{borderRadius:1,textTransform:"none"},children:qe.isLoading||Xe.isLoading?g?"Updating...":"Creating...":g?"Update":"Create"})]})]})]})}},4155:(e,t,r)=>{r.d(t,{Ay:()=>l});var n=r(5404),a=r(5460);const i="69181c670024df0dd32b",o={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_TASKS||"691fba3e0012d16c1016";async function s(e){try{const t=await n.LL.listDocuments(i,o,[a.XK.equal("projectId",e)]);return(t.documents||[]).map((e=>({...e,subtasks:e.subtasks?JSON.parse(e.subtasks):[],attachments:e.attachments?JSON.parse(e.attachments):[]})))}catch(t){return console.error("Error listing tasks:",t),[]}}const l={createTask:async function(e,t,r){try{const{title:s,description:l="",dueDate:c=null,priority:d="Medium",status:u="Not Started",subtasks:m=[],attachments:p=[]}=t;if(!s||!s.trim())throw new Error("Task title is required");const h=(new Date).toISOString(),g={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",A=await n.LL.getDocument(i,g,e),f=[a.aX.read(a.Xh.user(A.ownerId)),a.aX.update(a.Xh.user(A.ownerId)),a.aX.delete(a.Xh.user(A.ownerId)),...(A.accessGroup||[]).map((e=>a.aX.read(a.Xh.user(e)))),...(A.accessGroup||[]).map((e=>a.aX.update(a.Xh.user(e))))],y={projectId:e,title:s.trim(),description:l,dueDate:c?new Date(c).toISOString():null,priority:d,status:u,subtasks:JSON.stringify(Array.isArray(m)?m:[]),attachments:JSON.stringify(Array.isArray(p)?p:[]),createdAt:h,updatedAt:h,createdBy:r};return await n.LL.createDocument(i,o,a.ID.unique(),y,f)}catch(s){throw console.error("Error creating task:",s),s}},listTasks:s,getTask:async function(e){try{const t=await n.LL.getDocument(i,o,e);return{...t,subtasks:t.subtasks?JSON.parse(t.subtasks):[],attachments:t.attachments?JSON.parse(t.attachments):[]}}catch(t){throw console.error("Error getting task:",t),t}},updateTask:async function(e,t){try{const r={...t,updatedAt:(new Date).toISOString()};return r.subtasks&&(r.subtasks=JSON.stringify(Array.isArray(r.subtasks)?r.subtasks:[])),r.attachments&&(r.attachments=JSON.stringify(Array.isArray(r.attachments)?r.attachments:[])),delete r.comments,r.dueDate&&(r.dueDate=new Date(r.dueDate).toISOString()),await n.LL.updateDocument(i,o,e,r)}catch(r){throw console.error("Error updating task:",r),r}},deleteTask:async function(e){try{return await n.LL.deleteDocument(i,o,e)}catch(t){throw console.error("Error deleting task:",t),t}},getOverdueTasks:async function(e){try{const t={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",r=await n.LL.listDocuments(i,t,[a.XK.equal("ownerId",e)]),o=await n.LL.listDocuments(i,t,[a.XK.search("accessGroup",e)]),l=[...r.documents||[],...o.documents||[]],c=Array.from(new Set(l.map((e=>e.$id)))),d=(new Date).toISOString(),u=[];for(const e of c){const t=(await s(e)).filter((e=>e.dueDate&&new Date(e.dueDate)<new Date(d)&&"Completed"!==e.status));u.push(...t)}return u}catch(t){return console.error("Error getting overdue tasks:",t),[]}}}},9511:(e,t,r)=>{r.r(t),r.d(t,{addUserToAccessGroup:()=>m,createProject:()=>s,default:()=>h,deleteProject:()=>u,getProject:()=>c,listProjects:()=>l,removeUserFromAccessGroup:()=>p,updateProject:()=>d});var n=r(5404),a=r(5460);const i="69181c670024df0dd32b",o={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7";async function s(e,t){try{const{name:r,description:s,status:l="Not Started",colorTag:c="#1976d2",accessGroup:d=[]}=t;if(!r||!r.trim())throw new Error("Project name is required");const u="PRJ-"+Date.now().toString(36).toUpperCase()+"-"+Math.random().toString(36).substr(2,5).toUpperCase(),m=(new Date).toISOString(),p=[a.aX.read(a.Xh.user(e)),a.aX.update(a.Xh.user(e)),a.aX.delete(a.Xh.user(e)),...d.map((e=>a.aX.read(a.Xh.user(e)))),...d.map((e=>a.aX.update(a.Xh.user(e))))];return await n.LL.createDocument(i,o,a.ID.unique(),{ownerId:e,name:r.trim(),description:s||"",projectId:u,status:l,colorTag:c,accessGroup:Array.isArray(d)?d:[],createdAt:m,updatedAt:m},p)}catch(r){throw console.error("Error creating project:",r),r}}async function l(e){try{const t=await n.LL.listDocuments(i,o,[a.XK.equal("ownerId",e)]),r=await n.LL.listDocuments(i,o,[a.XK.search("accessGroup",e)]),s=[...t.documents||[],...r.documents||[]];return Array.from(new Map(s.map((e=>[e.$id,e]))).values())}catch(t){return console.error("Error listing projects:",t),[]}}async function c(e){try{return await n.LL.getDocument(i,o,e)}catch(t){throw console.error("Error getting project:",t),t}}async function d(e,t){try{const r={...t,updatedAt:(new Date).toISOString()};return await n.LL.updateDocument(i,o,e,r)}catch(r){throw console.error("Error updating project:",r),r}}async function u(e){try{return await n.LL.deleteDocument(i,o,e)}catch(t){throw console.error("Error deleting project:",t),t}}async function m(e,t){try{const r=await n.LL.getDocument(i,o,e),s="6918f632002d42536ab2",l=await n.LL.listDocuments(i,s,[a.XK.equal("email",t.toLowerCase())]);if(!l.documents||0===l.documents.length)throw new Error("User not found with that email");const c=l.documents[0].userId,d=r.accessGroup||[];if(d.includes(c))throw new Error("User is already in the access group");const u=[...d,c];return await n.LL.updateDocument(i,o,e,{accessGroup:u,updatedAt:(new Date).toISOString()})}catch(r){throw console.error("Error adding user to access group:",r),r}}async function p(e,t){try{const r=await n.LL.getDocument(i,o,e),a=(r.accessGroup||[]).filter((e=>e!==t));return await n.LL.updateDocument(i,o,e,{accessGroup:a,updatedAt:(new Date).toISOString()})}catch(r){throw console.error("Error removing user from access group:",r),r}}const h={createProject:s,listProjects:l,getProject:c,updateProject:d,deleteProject:u,addUserToAccessGroup:m,removeUserFromAccessGroup:p}}}]);
//# sourceMappingURL=77.5ee7c049.chunk.js.map