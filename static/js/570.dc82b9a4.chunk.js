"use strict";(self.webpackChunknote_sharing_app_client=self.webpackChunknote_sharing_app_client||[]).push([[570],{3560:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(9662),a=r(579);const o=(0,s.A)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},3768:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(9662),a=r(579);const o=(0,s.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},4155:(e,t,r)=>{r.d(t,{Ay:()=>i});var s=r(5404),a=r(5460);const o="69181c670024df0dd32b",n={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_TASKS||"691fba3e0012d16c1016";async function c(e){try{const t=await s.LL.listDocuments(o,n,[a.XK.equal("projectId",e)]);return(t.documents||[]).map((e=>({...e,subtasks:e.subtasks?JSON.parse(e.subtasks):[],attachments:e.attachments?JSON.parse(e.attachments):[]})))}catch(t){return console.error("Error listing tasks:",t),[]}}const i={createTask:async function(e,t,r){try{const{title:c,description:i="",dueDate:d=null,priority:l="Medium",status:u="Not Started",subtasks:A=[],attachments:P=[]}=t;if(!c||!c.trim())throw new Error("Task title is required");const p=(new Date).toISOString(),_={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",E=await s.LL.getDocument(o,_,e),T=[a.aX.read(a.Xh.user(E.ownerId)),a.aX.update(a.Xh.user(E.ownerId)),a.aX.delete(a.Xh.user(E.ownerId)),...(E.accessGroup||[]).map((e=>a.aX.read(a.Xh.user(e)))),...(E.accessGroup||[]).map((e=>a.aX.update(a.Xh.user(e))))],h={projectId:e,title:c.trim(),description:i,dueDate:d?new Date(d).toISOString():null,priority:l,status:u,subtasks:JSON.stringify(Array.isArray(A)?A:[]),attachments:JSON.stringify(Array.isArray(P)?P:[]),createdAt:p,updatedAt:p,createdBy:r};return await s.LL.createDocument(o,n,a.ID.unique(),h,T)}catch(c){throw console.error("Error creating task:",c),c}},listTasks:c,getTask:async function(e){try{const t=await s.LL.getDocument(o,n,e);return{...t,subtasks:t.subtasks?JSON.parse(t.subtasks):[],attachments:t.attachments?JSON.parse(t.attachments):[]}}catch(t){throw console.error("Error getting task:",t),t}},updateTask:async function(e,t){try{const r={...t,updatedAt:(new Date).toISOString()};return r.subtasks&&(r.subtasks=JSON.stringify(Array.isArray(r.subtasks)?r.subtasks:[])),r.attachments&&(r.attachments=JSON.stringify(Array.isArray(r.attachments)?r.attachments:[])),delete r.comments,r.dueDate&&(r.dueDate=new Date(r.dueDate).toISOString()),await s.LL.updateDocument(o,n,e,r)}catch(r){throw console.error("Error updating task:",r),r}},deleteTask:async function(e){try{return await s.LL.deleteDocument(o,n,e)}catch(t){throw console.error("Error deleting task:",t),t}},getOverdueTasks:async function(e){try{const t={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",r=await s.LL.listDocuments(o,t,[a.XK.equal("ownerId",e)]),n=await s.LL.listDocuments(o,t,[a.XK.search("accessGroup",e)]),i=[...r.documents||[],...n.documents||[]],d=Array.from(new Set(i.map((e=>e.$id)))),l=(new Date).toISOString(),u=[];for(const e of d){const t=(await c(e)).filter((e=>e.dueDate&&new Date(e.dueDate)<new Date(l)&&"Completed"!==e.status));u.push(...t)}return u}catch(t){return console.error("Error getting overdue tasks:",t),[]}}}},7600:(e,t,r)=>{r.d(t,{A:()=>E});var s=r(8587),a=r(8168),o=r(5043),n=r(8387),c=r(5049),i=r(4535),d=r(2876),l=r(4987),u=r(239);function A(e){return(0,u.Ay)("MuiCardActions",e)}(0,l.A)("MuiCardActions",["root","spacing"]);var P=r(579);const p=["disableSpacing","className"],_=(0,i.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,a.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),E=o.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiCardActions"}),{disableSpacing:o=!1,className:i}=r,l=(0,s.A)(r,p),u=(0,a.A)({},r,{disableSpacing:o}),E=(e=>{const{classes:t,disableSpacing:r}=e,s={root:["root",!r&&"spacing"]};return(0,c.A)(s,A,t)})(u);return(0,P.jsx)(_,(0,a.A)({className:(0,n.A)(E.root,i),ownerState:u,ref:t},l))}))},8570:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var s=r(5043),a=r(9252),o=r(6446),n=r(5865),c=r(3438),i=r(547),d=r(7784),l=r(1787),u=r(3193),A=r(9190),P=r(598),p=r(2143),_=r(8903),E=r(2110),T=r(6494),h=r(3845),C=r(7600),m=r(7392),S=r(35),R=r(6600),O=r(5316),I=r(9347),f=r(141),L=r(9484),x=r(9662),j=r(579);const y=(0,x.A)((0,j.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");var g=r(3560),w=r(3768),D=r(3216),v=r(5016),b=r(9511);r(4155),r(446);const N=()=>{const{user:e}=(0,v.A)(),t=(0,D.Zp)(),[r,x]=(0,s.useState)([]),[N,W]=(0,s.useState)([]),[U,k]=(0,s.useState)(!1),[B,X]=(0,s.useState)(""),[G,K]=(0,s.useState)(""),[H,M]=(0,s.useState)(""),[Y,F]=(0,s.useState)("all"),[q,J]=(0,s.useState)(!1),[z,V]=(0,s.useState)(null);(0,s.useEffect)((()=>{null!==e&&void 0!==e&&e.$id&&$()}),[null===e||void 0===e?void 0:e.$id]),(0,s.useEffect)((()=>{Q()}),[r,H,Y]);const $=async()=>{k(!0);try{const t=await b.default.listProjects(e.$id);x(t)}catch(t){console.error("Error fetching projects:",t),X("Failed to load projects")}finally{k(!1)}},Q=()=>{let e=[...r];H&&(e=e.filter((e=>{var t,r,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(H.toLowerCase()))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(H.toLowerCase()))||(null===(s=e.projectId)||void 0===s?void 0:s.toLowerCase().includes(H.toLowerCase()))}))),"all"!==Y&&(e=e.filter((e=>e.status===Y))),W(e)};return(0,j.jsxs)(a.A,{maxWidth:"lg",sx:{py:4},children:[(0,j.jsxs)(o.A,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,j.jsx)(n.A,{variant:"h4",sx:{fontWeight:"bold",color:"primary.main"},children:"Projects"}),(0,j.jsx)(c.A,{variant:"contained",startIcon:(0,j.jsx)(f.A,{}),onClick:()=>t("/projects/new"),sx:{borderRadius:2,textTransform:"none"},children:"New Project"})]}),B&&(0,j.jsx)(i.A,{severity:"error",sx:{mb:2},onClose:()=>X(""),children:B}),G&&(0,j.jsx)(i.A,{severity:"success",sx:{mb:2},onClose:()=>K(""),children:G}),(0,j.jsxs)(o.A,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[(0,j.jsx)(d.A,{placeholder:"Search projects...",value:H,onChange:e=>M(e.target.value),InputProps:{startAdornment:(0,j.jsx)(l.A,{position:"start",children:(0,j.jsx)(L.A,{})})},sx:{flexGrow:1,minWidth:200},size:"small"}),(0,j.jsxs)(u.A,{size:"small",sx:{minWidth:150},children:[(0,j.jsx)(A.A,{children:"Status"}),(0,j.jsxs)(P.A,{value:Y,onChange:e=>F(e.target.value),label:"Status",children:[(0,j.jsx)(p.A,{value:"all",children:"All Status"}),(0,j.jsx)(p.A,{value:"Not Started",children:"Not Started"}),(0,j.jsx)(p.A,{value:"Active",children:"Active"}),(0,j.jsx)(p.A,{value:"On Hold",children:"On Hold"}),(0,j.jsx)(p.A,{value:"Completed",children:"Completed"}),(0,j.jsx)(p.A,{value:"Cancelled",children:"Cancelled"})]})]})]}),U?(0,j.jsx)(n.A,{children:"Loading projects..."}):0===N.length?(0,j.jsxs)(o.A,{sx:{textAlign:"center",py:8},children:[(0,j.jsx)(n.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:0===r.length?"No projects yet":"No projects match your filters"}),0===r.length&&(0,j.jsx)(c.A,{variant:"contained",startIcon:(0,j.jsx)(f.A,{}),onClick:()=>t("/projects/new"),sx:{mt:2,borderRadius:2,textTransform:"none"},children:"Create Your First Project"})]}):(0,j.jsx)(_.Ay,{container:!0,spacing:3,children:N.map((e=>{return(0,j.jsx)(_.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,j.jsxs)(E.A,{sx:{height:"100%",display:"flex",flexDirection:"column",borderLeft:`4px solid ${e.colorTag||"#1976d2"}`,transition:"all 0.2s ease-in-out","&:hover":{boxShadow:6,transform:"translateY(-4px)"}},children:[(0,j.jsxs)(T.A,{sx:{flexGrow:1},children:[(0,j.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,j.jsx)(n.A,{variant:"h6",sx:{fontWeight:"medium",flexGrow:1},children:e.name}),(0,j.jsx)(h.A,{label:e.status,size:"small",color:(r=e.status,{"Not Started":"default",Active:"primary","On Hold":"warning",Completed:"success",Cancelled:"error"}[r]||"default"),sx:{ml:1}})]}),(0,j.jsx)(n.A,{variant:"body2",color:"text.secondary",sx:{mb:2,minHeight:40},children:e.description||"No description"}),(0,j.jsxs)(n.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:["ID: ",e.projectId]}),e.accessGroup&&e.accessGroup.length>0&&(0,j.jsxs)(n.A,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:[e.accessGroup.length," member",1!==e.accessGroup.length?"s":""]})]}),(0,j.jsxs)(C.A,{sx:{px:2,pb:2,justifyContent:"space-between"},children:[(0,j.jsx)(c.A,{size:"small",startIcon:(0,j.jsx)(y,{}),onClick:()=>t(`/projects/${e.$id}`),sx:{textTransform:"none"},children:"Open"}),(0,j.jsxs)(o.A,{children:[(0,j.jsx)(m.A,{size:"small",onClick:()=>t(`/projects/${e.$id}/edit`),sx:{mr:.5},children:(0,j.jsx)(g.A,{fontSize:"small"})}),(0,j.jsx)(m.A,{size:"small",onClick:()=>{V(e),J(!0)},color:"error",children:(0,j.jsx)(w.A,{fontSize:"small"})})]})]})]})},e.$id);var r}))}),(0,j.jsxs)(S.A,{open:q,onClose:()=>J(!1),children:[(0,j.jsx)(R.A,{children:"Delete Project"}),(0,j.jsx)(O.A,{children:(0,j.jsxs)(n.A,{children:['Are you sure you want to delete "',null===z||void 0===z?void 0:z.name,'"? This will also delete all associated tasks and cannot be undone.']})}),(0,j.jsxs)(I.A,{children:[(0,j.jsx)(c.A,{onClick:()=>J(!1),children:"Cancel"}),(0,j.jsx)(c.A,{onClick:async()=>{if(z)try{await b.default.deleteProject(z.$id),K("Project deleted successfully"),J(!1),V(null),await $(),setTimeout((()=>K("")),3e3)}catch(e){X((null===e||void 0===e?void 0:e.message)||"Failed to delete project"),setTimeout((()=>X("")),5e3)}},color:"error",variant:"contained",children:"Delete"})]})]})]})}},9484:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(9662),a=r(579);const o=(0,s.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},9511:(e,t,r)=>{r.r(t),r.d(t,{addUserToAccessGroup:()=>A,createProject:()=>c,default:()=>p,deleteProject:()=>u,getProject:()=>d,listProjects:()=>i,removeUserFromAccessGroup:()=>P,updateProject:()=>l});var s=r(5404),a=r(5460);const o="69181c670024df0dd32b",n={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7";async function c(e,t){try{const{name:r,description:c,status:i="Not Started",colorTag:d="#1976d2",accessGroup:l=[]}=t;if(!r||!r.trim())throw new Error("Project name is required");const u="PRJ-"+Date.now().toString(36).toUpperCase()+"-"+Math.random().toString(36).substr(2,5).toUpperCase(),A=(new Date).toISOString(),P=[a.aX.read(a.Xh.user(e)),a.aX.update(a.Xh.user(e)),a.aX.delete(a.Xh.user(e)),...l.map((e=>a.aX.read(a.Xh.user(e)))),...l.map((e=>a.aX.update(a.Xh.user(e))))];return await s.LL.createDocument(o,n,a.ID.unique(),{ownerId:e,name:r.trim(),description:c||"",projectId:u,status:i,colorTag:d,accessGroup:Array.isArray(l)?l:[],createdAt:A,updatedAt:A},P)}catch(r){throw console.error("Error creating project:",r),r}}async function i(e){try{const t=await s.LL.listDocuments(o,n,[a.XK.equal("ownerId",e)]),r=await s.LL.listDocuments(o,n,[a.XK.search("accessGroup",e)]),c=[...t.documents||[],...r.documents||[]];return Array.from(new Map(c.map((e=>[e.$id,e]))).values())}catch(t){return console.error("Error listing projects:",t),[]}}async function d(e){try{return await s.LL.getDocument(o,n,e)}catch(t){throw console.error("Error getting project:",t),t}}async function l(e,t){try{const r={...t,updatedAt:(new Date).toISOString()};return await s.LL.updateDocument(o,n,e,r)}catch(r){throw console.error("Error updating project:",r),r}}async function u(e){try{return await s.LL.deleteDocument(o,n,e)}catch(t){throw console.error("Error deleting project:",t),t}}async function A(e,t){try{const r=await s.LL.getDocument(o,n,e),c="6918f632002d42536ab2",i=await s.LL.listDocuments(o,c,[a.XK.equal("email",t.toLowerCase())]);if(!i.documents||0===i.documents.length)throw new Error("User not found with that email");const d=i.documents[0].userId,l=r.accessGroup||[];if(l.includes(d))throw new Error("User is already in the access group");const u=[...l,d];return await s.LL.updateDocument(o,n,e,{accessGroup:u,updatedAt:(new Date).toISOString()})}catch(r){throw console.error("Error adding user to access group:",r),r}}async function P(e,t){try{const r=await s.LL.getDocument(o,n,e),a=(r.accessGroup||[]).filter((e=>e!==t));return await s.LL.updateDocument(o,n,e,{accessGroup:a,updatedAt:(new Date).toISOString()})}catch(r){throw console.error("Error removing user from access group:",r),r}}const p={createProject:c,listProjects:i,getProject:d,updateProject:l,deleteProject:u,addUserToAccessGroup:A,removeUserFromAccessGroup:P}}}]);
//# sourceMappingURL=570.dc82b9a4.chunk.js.map