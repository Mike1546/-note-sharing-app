"use strict";(self.webpackChunknote_sharing_app_client=self.webpackChunknote_sharing_app_client||[]).push([[781],{4155:(e,t,r)=>{r.d(t,{Ay:()=>d});var n=r(5404),a=r(5460);const i="69181c670024df0dd32b",s={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_TASKS||"691fba3e0012d16c1016";async function o(e){try{const t=await n.LL.listDocuments(i,s,[a.XK.equal("projectId",e)]);return(t.documents||[]).map((e=>({...e,subtasks:e.subtasks?JSON.parse(e.subtasks):[],attachments:e.attachments?JSON.parse(e.attachments):[]})))}catch(t){return console.error("Error listing tasks:",t),[]}}const d={createTask:async function(e,t,r){try{const{title:o,description:d="",dueDate:c=null,priority:l="Medium",status:u="Not Started",subtasks:m=[],attachments:A=[]}=t;if(!o||!o.trim())throw new Error("Task title is required");const p=(new Date).toISOString(),h={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",f=await n.LL.getDocument(i,h,e),y=[a.aX.read(a.Xh.user(f.ownerId)),a.aX.update(a.Xh.user(f.ownerId)),a.aX.delete(a.Xh.user(f.ownerId)),...(f.accessGroup||[]).map((e=>a.aX.read(a.Xh.user(e)))),...(f.accessGroup||[]).map((e=>a.aX.update(a.Xh.user(e))))],g={projectId:e,title:o.trim(),description:d,dueDate:c?new Date(c).toISOString():null,priority:l,status:u,subtasks:JSON.stringify(Array.isArray(m)?m:[]),attachments:JSON.stringify(Array.isArray(A)?A:[]),createdAt:p,updatedAt:p,createdBy:r};return await n.LL.createDocument(i,s,a.ID.unique(),g,y)}catch(o){throw console.error("Error creating task:",o),o}},listTasks:o,getTask:async function(e){try{const t=await n.LL.getDocument(i,s,e);return{...t,subtasks:t.subtasks?JSON.parse(t.subtasks):[],attachments:t.attachments?JSON.parse(t.attachments):[]}}catch(t){throw console.error("Error getting task:",t),t}},updateTask:async function(e,t){try{const r={...t,updatedAt:(new Date).toISOString()};return r.subtasks&&(r.subtasks=JSON.stringify(Array.isArray(r.subtasks)?r.subtasks:[])),r.attachments&&(r.attachments=JSON.stringify(Array.isArray(r.attachments)?r.attachments:[])),delete r.comments,r.dueDate&&(r.dueDate=new Date(r.dueDate).toISOString()),await n.LL.updateDocument(i,s,e,r)}catch(r){throw console.error("Error updating task:",r),r}},deleteTask:async function(e){try{return await n.LL.deleteDocument(i,s,e)}catch(t){throw console.error("Error deleting task:",t),t}},getOverdueTasks:async function(e){try{const t={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",r=await n.LL.listDocuments(i,t,[a.XK.equal("ownerId",e)]),s=await n.LL.listDocuments(i,t,[a.XK.search("accessGroup",e)]),d=[...r.documents||[],...s.documents||[]],c=Array.from(new Set(d.map((e=>e.$id)))),l=(new Date).toISOString(),u=[];for(const e of c){const t=(await o(e)).filter((e=>e.dueDate&&new Date(e.dueDate)<new Date(l)&&"Completed"!==e.status));u.push(...t)}return u}catch(t){return console.error("Error getting overdue tasks:",t),[]}}}},7781:(e,t,r)=>{r.r(t),r.d(t,{default:()=>le});var n=r(5043),a=r(8903),i=r(6446),s=r(4147),o=r(2110),d=r(6494),c=r(5865),l=r(3845),u=r(7600),m=r(3438),A=r(7392),p=r(279),h=r(9252),f=r(547),y=r(7784),g=r(1787),x=r(3193),P=r(9190),T=r(598),E=r(2143),_=r(3336),C=r(4912),R=r(4056),D=r(35),I=r(6600),O=r(5316),v=r(4605),j=r(7843),S=r(9347),b=r(5337),w=r(4694),L=r(3245),Y=r(3560),W=r(3768),N=r(2101),M=r(8293),k=r(7423),U=r(141),B=r(9484),F=r(7332),K=r(8994),q=r(5626),H=r(6649),X=r(3216),$=r(5475),z=r(446),G=r.n(z),J=r(5016),V=r(5404),Q=r(5460);const Z="69181c670024df0dd32b",ee={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_REMINDERS||"691f989400364a8670d8";const te={createReminder:async function(e,t){try{const{title:r,description:n,date:a,time:i,notification:s,priority:o,assignedTo:d=[],recurring:c=null}=t;let l;if("string"===typeof a&&a.includes("T"))l=new Date(a);else if(i){const e="string"===typeof a?a:a.format("YYYY-MM-DD"),t="string"===typeof i?i:i.format("HH:mm");l=new Date(`${e}T${t}`)}else{const e="string"===typeof a?a:a.format("YYYY-MM-DD");l=new Date(`${e}T12:00`)}if(isNaN(l.getTime()))throw new Error("Invalid date or time value");return await V.LL.createDocument(Z,ee,Q.ID.unique(),{ownerId:e,title:r.trim(),description:n||"",date:l.toISOString(),notification:!1!==s,priority:o||"medium",assignedTo:Array.isArray(d)?d:[],recurring:c||null})}catch(r){throw console.error("Error creating reminder:",r),r}},listReminders:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=[Q.XK.equal("ownerId",e)],n=(await V.LL.listDocuments(Z,ee,r)).documents||[];if(!t)return n;const a=new Date(t),i=a.getDate(),s=a.getMonth(),o=a.getFullYear(),d=a.getDay();return n.filter((e=>{const t=new Date(e.date),r=t.getDate(),n=t.getMonth(),c=t.getFullYear(),l=t.getDay();if(r===i&&n===s&&c===o)return!0;if(e.recurring)switch(e.recurring){case"daily":return t<=a;case"weekly":return l===d&&t<=a;case"monthly":return r===i&&t<=a;case"yearly":return r===i&&n===s&&t<=a;default:return!1}return!1}))}catch(r){return 404===r.code?(console.warn("Reminders collection not set up yet"),[]):(console.error("Error listing reminders:",r),[])}},updateReminder:async function(e,t){try{const{title:r,description:n,date:a,time:i,notification:s,priority:o,assignedTo:d,recurring:c}=t;let l;if("string"===typeof a&&a.includes("T"))l=new Date(a);else if(i){const e="string"===typeof a?a:a.format("YYYY-MM-DD"),t="string"===typeof i?i:i.format("HH:mm");l=new Date(`${e}T${t}`)}else{const e="string"===typeof a?a:a.format("YYYY-MM-DD");l=new Date(`${e}T12:00`)}if(isNaN(l.getTime()))throw new Error("Invalid date or time value");const u={title:r.trim(),description:n||"",date:l.toISOString(),notification:!1!==s,priority:o||"medium"};return void 0!==d&&(u.assignedTo=Array.isArray(d)?d:[]),void 0!==c&&(u.recurring=c||null),await V.LL.updateDocument(Z,ee,e,u)}catch(r){throw console.error("Failed to update reminder:",r),r}},deleteReminder:async function(e){try{return await V.LL.deleteDocument(Z,ee,e)}catch(t){throw console.warn("Failed to delete reminder"),t}}};var re=r(6931),ne=r(4155),ae=r(9511);async function ie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=[];try{(await te.listReminders(e,t)).forEach((e=>{n.push({type:"reminder",id:e.$id,title:e.title,description:e.description,date:e.date,time:G()(e.date).format("HH:mm"),priority:e.priority||"medium",notification:e.notification,assignedTo:e.assignedTo||[],recurring:e.recurring,ownerId:e.ownerId,source:"reminder"})}))}catch(r){console.warn("[CalendarData] Error fetching reminders:",r)}try{const a=(await ae.default.listProjects(e)).map((e=>e.$id));for(const e of a)try{(await ne.Ay.listTasks(e)).forEach((e=>{if(e.dueDate){const r=G()(e.dueDate).format("YYYY-MM-DD");if(t&&r!==t)return;n.push({type:"task",id:e.$id,title:e.title,description:e.description,date:e.dueDate,time:G()(e.dueDate).format("HH:mm"),priority:e.priority||"Medium",status:e.status,projectId:e.projectId,assignedTo:[],recurring:null,ownerId:e.createdBy,source:"task",isOverdue:new Date(e.dueDate)<new Date&&"Completed"!==e.status})}}))}catch(r){console.warn(`[CalendarData] Error fetching tasks for project ${e}:`,r)}}catch(r){console.warn("[CalendarData] Error fetching projects:",r)}return n.sort(((e,t)=>new Date(e.date)-new Date(t.date))),n}catch(r){return console.error("[CalendarData] Error getting calendar items:",r),[]}}const se={getCalendarItems:ie,getDayItems:async function(e,t){return ie(e,t)},getUpcomingItems:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;try{const r=await ie(e),n=G()().startOf("day"),a=n.add(t,"day");return r.filter((e=>{const t=G()(e.date).startOf("day");return t.isAfter(n.subtract(1,"day"))&&t.isBefore(a.add(1,"day"))}))}catch(r){return console.error("[CalendarData] Error getting upcoming items:",r),[]}},getOverdueItems:async function(e){try{const t=await ie(e),r=G()().startOf("day");return t.filter((e=>{const t=G()(e.date).startOf("day").isBefore(r),n="task"===e.type&&"Completed"===e.status;return t&&!n}))}catch(t){return console.error("[CalendarData] Error getting overdue items:",t),[]}},getItemsByDateRange:async function(e,t,r){try{const n=await ie(e),a=G()(t).startOf("day"),i=G()(r).endOf("day"),s=n.filter((e=>{const t=G()(e.date).startOf("day");return t.isAfter(a.subtract(1,"day"))&&t.isBefore(i.add(1,"day"))})),o={};return s.forEach((e=>{const t=G()(e.date).format("YYYY-MM-DD");o[t]||(o[t]=[]),o[t].push(e)})),o}catch(n){return console.error("[CalendarData] Error getting items by date range:",n),{}}}};var oe=r(3248),de=r(7097),ce=r(579);const le=()=>{const{user:e}=(0,J.A)(),t=(0,X.Zp)(),[r]=(0,$.ok)(),z=r.get("date"),Q=z?G()(z):G()(),[Z,ee]=(0,n.useState)(Q),[ne,ae]=(0,n.useState)(Q),[ie,le]=(0,n.useState)(!1),ue=(0,oe.jE)(),[me,Ae]=(0,n.useState)(null),[pe,he]=(0,n.useState)(""),[fe,ye]=(0,n.useState)(""),[ge,xe]=(0,n.useState)(!1),[Pe,Te]=(0,n.useState)([]),[Ee,_e]=(0,n.useState)(0),[Ce,Re]=(0,n.useState)("all"),[De,Ie]=(0,n.useState)("all"),[Oe,ve]=(0,n.useState)(""),[je,Se]=(0,n.useState)({}),[be,we]=(0,n.useState)({title:"",description:"",date:G()().format("YYYY-MM-DD"),time:"12:00",notification:!0,priority:"medium",assignedTo:[],recurring:null}),[Le,Ye]=(0,n.useState)("");(0,n.useEffect)((()=>{null!==e&&void 0!==e&&e.$id&&(async()=>{try{const e="6918f632002d42536ab2",t="69181c670024df0dd32b",r=await V.LL.listDocuments(t,e);Te(r.documents||[])}catch(e){console.error("Failed to load users:",e)}})()}),[null===e||void 0===e?void 0:e.$id]);const We=ne.startOf("month"),Ne=ne.endOf("month"),{data:Me=[],isLoading:ke}=((e,t)=>{const r=t?G()(t).format("YYYY-MM-DD"):G()().format("YYYY-MM-DD");return(0,re.I)({queryKey:["calendar","dayItems",e,r],queryFn:async()=>await se.getDayItems(e,r),enabled:!!e,staleTime:6e4})})(null===e||void 0===e?void 0:e.$id,Z),{data:Ue=[],isLoading:Be}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return(0,re.I)({queryKey:["calendar","upcoming",e,t],queryFn:async()=>await se.getUpcomingItems(e,t),enabled:!!e,staleTime:12e4})}(null===e||void 0===e?void 0:e.$id,7),{data:Fe=[],isLoading:Ke}=(qe=null===e||void 0===e?void 0:e.$id,(0,re.I)({queryKey:["calendar","overdue",qe],queryFn:async()=>await se.getOverdueItems(qe),enabled:!!qe,staleTime:12e4}));var qe;const{data:He={},isLoading:Xe}=((e,t,r)=>{const n=t?G()(t).format("YYYY-MM-DD"):null,a=r?G()(r).format("YYYY-MM-DD"):null;return(0,re.I)({queryKey:["calendar","monthItems",e,n,a],queryFn:async()=>await se.getItemsByDateRange(e,n,a),enabled:!!e&&!!n&&!!a,staleTime:3e5})})(null===e||void 0===e?void 0:e.$id,We.format("YYYY-MM-DD"),Ne.format("YYYY-MM-DD")),$e=(0,de.n)({mutationFn:async t=>await te.createReminder(e.$id,t),onSuccess:()=>{ue.invalidateQueries(["calendar"]),ye("Reminder created successfully"),setTimeout((()=>ye("")),3e3)},onError:e=>{he((null===e||void 0===e?void 0:e.message)||"Failed to create reminder")}}),ze=(0,de.n)({mutationFn:async e=>{let{reminderId:t,reminderData:r}=e;return await te.updateReminder(t,r)},onSuccess:()=>{ue.invalidateQueries(["calendar"]),ye("Reminder updated successfully"),setTimeout((()=>ye("")),3e3)},onError:e=>{he((null===e||void 0===e?void 0:e.message)||"Failed to update reminder")}}),Ge=(0,de.n)({mutationFn:async e=>await te.deleteReminder(e),onSuccess:()=>{ue.invalidateQueries(["calendar"]),ye("Reminder deleted successfully"),setTimeout((()=>ye("")),3e3)},onError:e=>{he((null===e||void 0===e?void 0:e.message)||"Failed to delete reminder")}});(0,n.useEffect)((()=>{const e="/calendar"+(Z.format("YYYY-MM-DD")!==G()().format("YYYY-MM-DD")?`?date=${Z.format("YYYY-MM-DD")}`:"");window.history.replaceState({},"",e)}),[Z]);const Je=e=>{ee(e),ae(e)},Ve=e=>{const t="next"===e?ne.add(1,"month"):ne.subtract(1,"month");ae(t),ee(t)},Qe=e=>{const{name:t,value:r,checked:n}=e.target;we((e=>({...e,[t]:"notification"===t?n:r})))},Ze=()=>{if(!Le.trim())return;const e=Pe.find((e=>{var t;return(null===(t=e.email)||void 0===t?void 0:t.toLowerCase())===Le.toLowerCase()}));return e?be.assignedTo.some((t=>t===e.userId))?(he("User is already assigned"),void setTimeout((()=>he("")),3e3)):(we((t=>({...t,assignedTo:[...t.assignedTo,e.userId]}))),void Ye("")):(he("User not found with that email"),void setTimeout((()=>he("")),3e3))},et=e=>e.map((e=>{const t=Pe.find((t=>t.userId===e));return(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.email)||e})),tt=e=>e.filter((e=>{if("reminders"===Ce&&"reminder"!==e.type)return!1;if("tasks"===Ce&&"task"!==e.type)return!1;if("all"!==De){var t;const r=null===(t=e.priority)||void 0===t?void 0:t.toLowerCase();if("high"===De&&"high"!==r)return!1;if("medium"===De&&"medium"!==r)return!1;if("low"===De&&"low"!==r)return!1}if(Oe){var r,n;const t=Oe.toLowerCase();if((null===(r=e.title)||void 0===r||!r.toLowerCase().includes(t))&&(null===(n=e.description)||void 0===n||!n.toLowerCase().includes(t)))return!1}return!0})),rt=e=>{const r="task"===e.type,n=e.isOverdue;return(0,ce.jsxs)(o.A,{sx:{mb:2,borderRadius:2,boxShadow:2,borderLeft:"4px solid "+(n?"#d32f2f":"high"===e.priority||"High"===e.priority||"Critical"===e.priority?"#f57c00":"medium"===e.priority||"Medium"===e.priority?"#fbc02d":"#388e3c"),transition:"all 0.2s ease-in-out","&:hover":{boxShadow:4,transform:"translateY(-2px)"}},children:[(0,ce.jsxs)(d.A,{sx:{pb:1},children:[(0,ce.jsxs)(i.A,{sx:{display:"flex",alignItems:"flex-start",mb:1},children:[r?(0,ce.jsx)(b.A,{sx:{mr:1,color:"primary.main",mt:.5},fontSize:"small"}):(0,ce.jsx)(w.A,{sx:{mr:1,color:"primary.main",mt:.5},fontSize:"small"}),(0,ce.jsxs)(i.A,{sx:{flexGrow:1},children:[(0,ce.jsx)(c.A,{variant:"h6",sx:{fontWeight:"medium",color:"text.primary"},children:e.title}),r&&(0,ce.jsx)(l.A,{label:e.status,size:"small",sx:{mt:.5,fontSize:"0.7rem",height:"20px"},color:"Completed"===e.status?"success":"default"})]}),(0,ce.jsx)(l.A,{label:e.priority,size:"small",sx:{fontWeight:"medium",fontSize:"0.7rem"},color:"high"===e.priority||"High"===e.priority||"Critical"===e.priority?"error":"medium"===e.priority||"Medium"===e.priority?"warning":"success"})]}),e.description&&(0,ce.jsx)(c.A,{variant:"body2",sx:{color:"text.secondary",mb:1.5,ml:4},children:e.description}),e.assignedTo&&e.assignedTo.length>0&&(0,ce.jsxs)(i.A,{sx:{mb:1,ml:4},children:[(0,ce.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Assigned to:"}),(0,ce.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:et(e.assignedTo).map(((e,t)=>(0,ce.jsx)(l.A,{label:e,size:"small",sx:{fontSize:"0.7rem",height:"20px"}},t)))})]}),e.recurring&&(0,ce.jsx)(l.A,{label:`Repeats: ${e.recurring}`,size:"small",color:"info",sx:{mb:1,ml:4,fontSize:"0.7rem"}}),(0,ce.jsxs)(i.A,{sx:{mt:1,display:"flex",alignItems:"center",gap:1,color:"text.secondary",ml:4},children:[(0,ce.jsx)(L.A,{color:e.notification?"primary":"disabled",fontSize:"small"}),(0,ce.jsx)(c.A,{variant:"body2",children:G()(e.date).format("h:mm A")}),n&&(0,ce.jsx)(l.A,{label:"Overdue",size:"small",color:"error",sx:{fontSize:"0.7rem",height:"20px"}})]})]}),(0,ce.jsx)(u.A,{sx:{px:2,pb:2},children:r?(0,ce.jsx)(m.A,{size:"small",onClick:()=>t(`/projects/${e.projectId}/tasks/${e.id}`),sx:{textTransform:"none"},children:"View Task"}):(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(A.A,{size:"small",onClick:()=>(e=>{"reminder"===e.type?(Ae(e),we({title:e.title,description:e.description||"",date:G()(e.date).format("YYYY-MM-DD"),time:G()(e.date).format("HH:mm"),notification:e.notification,priority:e.priority,assignedTo:e.assignedTo||[],recurring:e.recurring||null}),Ye(""),le(!0)):"task"===e.type&&t(`/projects/${e.projectId}/tasks/${e.id}`)})(e),sx:{"&:hover":{color:"primary.main",backgroundColor:"primary.lighter"}},children:(0,ce.jsx)(Y.A,{fontSize:"small"})}),(0,ce.jsx)(A.A,{size:"small",onClick:()=>(async e=>{if("reminder"===e.type){if(!window.confirm("Are you sure you want to delete this reminder?"))return;Ge.mutate(e.id)}})(e),sx:{"&:hover":{color:"error.main",backgroundColor:"error.lighter"}},children:(0,ce.jsx)(W.A,{fontSize:"small"})})]})})]},e.id)},nt=tt(Me),at=tt(Ue),it=tt(Fe);return(0,ce.jsxs)(h.A,{maxWidth:"lg",sx:{py:4},children:[(0,ce.jsxs)(i.A,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid",borderColor:"divider",pb:2},children:[(0,ce.jsx)(c.A,{variant:"h4",sx:{fontWeight:"bold",color:"primary.main"},children:"Calendar & Tasks"}),(0,ce.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[(0,ce.jsx)(m.A,{variant:"outlined",startIcon:(0,ce.jsx)(k.A,{}),onClick:()=>{const e=G()();ee(e),ae(e)},sx:{borderRadius:1,textTransform:"none"},children:"Today"}),(0,ce.jsx)(m.A,{variant:"contained",startIcon:(0,ce.jsx)(U.A,{}),onClick:()=>{Ae(null),we({title:"",description:"",date:Z.format("YYYY-MM-DD"),time:"12:00",notification:!0,priority:"medium",assignedTo:[],recurring:null}),Ye(""),le(!0)},sx:{borderRadius:2,textTransform:"none"},children:"Add Reminder"})]})]}),pe&&(0,ce.jsx)(f.A,{severity:"error",sx:{mb:2},onClose:()=>he(""),children:pe}),fe&&(0,ce.jsx)(f.A,{severity:"success",sx:{mb:2},onClose:()=>ye(""),children:fe}),(0,ce.jsxs)(i.A,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[(0,ce.jsx)(y.A,{placeholder:"Search...",value:Oe,onChange:e=>ve(e.target.value),InputProps:{startAdornment:(0,ce.jsx)(g.A,{position:"start",children:(0,ce.jsx)(B.A,{})})},sx:{flexGrow:1,minWidth:200},size:"small"}),(0,ce.jsxs)(x.A,{size:"small",sx:{minWidth:150},children:[(0,ce.jsx)(P.A,{children:"Type"}),(0,ce.jsxs)(T.A,{value:Ce,onChange:e=>Re(e.target.value),label:"Type",children:[(0,ce.jsx)(E.A,{value:"all",children:"All"}),(0,ce.jsx)(E.A,{value:"reminders",children:"Reminders"}),(0,ce.jsx)(E.A,{value:"tasks",children:"Tasks"})]})]}),(0,ce.jsxs)(x.A,{size:"small",sx:{minWidth:150},children:[(0,ce.jsx)(P.A,{children:"Priority"}),(0,ce.jsxs)(T.A,{value:De,onChange:e=>Ie(e.target.value),label:"Priority",children:[(0,ce.jsx)(E.A,{value:"all",children:"All"}),(0,ce.jsx)(E.A,{value:"high",children:"High"}),(0,ce.jsx)(E.A,{value:"medium",children:"Medium"}),(0,ce.jsx)(E.A,{value:"low",children:"Low"})]})]})]}),(0,ce.jsxs)(a.Ay,{container:!0,spacing:4,children:[(0,ce.jsx)(a.Ay,{item:!0,xs:12,md:8,children:(0,ce.jsxs)(_.A,{elevation:3,sx:{p:3,borderRadius:2,backgroundColor:"background.paper",transition:"all 0.3s ease-in-out","&:hover":{boxShadow:6}},children:[(0,ce.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,ce.jsx)(A.A,{onClick:()=>Ve("prev"),children:(0,ce.jsx)(F.A,{})}),(0,ce.jsx)(c.A,{variant:"h6",sx:{fontWeight:"bold"},children:ne.format("MMMM YYYY")}),(0,ce.jsx)(A.A,{onClick:()=>Ve("next"),children:(0,ce.jsx)(K.A,{})})]}),(0,ce.jsx)(i.A,{sx:{mb:2},children:(0,ce.jsx)(y.A,{fullWidth:!0,label:"Selected Date",type:"date",value:Z.format("YYYY-MM-DD"),onChange:e=>Je(G()(e.target.value)),InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})}),(0,ce.jsxs)(a.Ay,{container:!0,spacing:.5,children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>(0,ce.jsx)(a.Ay,{item:!0,xs:1.714,children:(0,ce.jsx)(i.A,{sx:{p:1,textAlign:"center",fontWeight:"bold",color:"primary.dark"},children:e})},e))),(()=>{const e=ne.startOf("month"),t=ne.endOf("month"),r=e.startOf("week"),n=t.endOf("week"),o=[];let d=r;for(;d.isBefore(n)||d.isSame(n,"day");)o.push(d),d=d.add(1,"day");return o.map(((e,t)=>{const r=(e=>{const t=e.format("YYYY-MM-DD");return(He[t]||[]).length})(e),n=(e=>{const t=e.format("YYYY-MM-DD"),r=He[t]||[];if(0===r.length)return null;const n=r.some((e=>{var t;return"high"===(null===(t=e.priority)||void 0===t?void 0:t.toLowerCase())||"High"===e.priority||"Critical"===e.priority}));return r.some((e=>e.isOverdue))||n?"error":r.some((e=>{var t;return"medium"===(null===(t=e.priority)||void 0===t?void 0:t.toLowerCase())||"Medium"===e.priority}))?"warning":"success"})(e),o=e.isSame(G()(),"day"),d=e.isSame(Z,"day");return(0,ce.jsx)(a.Ay,{item:!0,xs:1.714,children:(0,ce.jsxs)(i.A,{onClick:()=>Je(e),sx:{p:1,textAlign:"center",cursor:"pointer",borderRadius:1,position:"relative",backgroundColor:d?"primary.main":e.month()!==ne.month()?"action.hover":"transparent",color:d?"white":e.month()!==ne.month()?"text.secondary":"text.primary",fontWeight:d||o?"bold":"normal",border:o&&!d?"2px solid":"none",borderColor:o&&!d?"primary.main":"transparent","&:hover":{backgroundColor:d?"primary.dark":"action.selected"}},children:[e.date(),r>0&&(0,ce.jsx)(s.A,{badgeContent:r,color:n||"default",sx:{position:"absolute",top:2,right:2,"& .MuiBadge-badge":{fontSize:"0.6rem",minWidth:"16px",height:"16px",padding:"0 4px"}}})]})},t)}))})()]})]})}),(0,ce.jsxs)(a.Ay,{item:!0,xs:12,md:4,children:[(0,ce.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,ce.jsxs)(C.A,{value:Ee,onChange:(e,t)=>_e(t),children:[(0,ce.jsx)(R.A,{label:"Today"}),(0,ce.jsx)(R.A,{label:"Upcoming"}),(0,ce.jsx)(R.A,{label:"Overdue"})]})}),0===Ee&&(0,ce.jsxs)(i.A,{children:[(0,ce.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",mb:2},children:Z.format("MMMM D, YYYY")}),0===nt.length?(0,ce.jsx)(c.A,{color:"text.secondary",sx:{textAlign:"center",py:4},children:"No items for this day"}):nt.map((e=>rt(e)))]}),1===Ee&&(0,ce.jsxs)(i.A,{children:[(0,ce.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",mb:2},children:"Next 7 Days"}),0===at.length?(0,ce.jsx)(c.A,{color:"text.secondary",sx:{textAlign:"center",py:4},children:"No upcoming items"}):(()=>{const e={};at.forEach((t=>{const r=G()(t.date).format("YYYY-MM-DD");e[r]||(e[r]=[]),e[r].push(t)}));const t=Object.keys(e).sort();return(0,ce.jsx)(i.A,{children:0===t.length?(0,ce.jsx)(c.A,{color:"text.secondary",sx:{textAlign:"center",py:4},children:"No upcoming items"}):t.map((t=>{const r=e[t];if(0===r.length)return null;const n=G()(t),a=je[t];return(0,ce.jsxs)(i.A,{sx:{mb:2},children:[(0,ce.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1.5,bgcolor:"action.hover",borderRadius:1,cursor:"pointer","&:hover":{bgcolor:"action.selected"}},onClick:()=>Se((e=>({...e,[t]:!e[t]}))),children:[(0,ce.jsxs)(c.A,{variant:"subtitle1",sx:{fontWeight:"medium"},children:[n.format("MMMM D, YYYY")," (",r.length," ",1===r.length?"item":"items",")"]}),a?(0,ce.jsx)(N.A,{}):(0,ce.jsx)(M.A,{})]}),(0,ce.jsx)(p.A,{in:a,children:(0,ce.jsx)(i.A,{sx:{mt:1},children:r.map((e=>rt(e)))})})]},t)}))})})()]}),2===Ee&&(0,ce.jsxs)(i.A,{children:[(0,ce.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"medium",mb:2},children:"Overdue Items"}),0===it.length?(0,ce.jsx)(c.A,{color:"text.secondary",sx:{textAlign:"center",py:4},children:"No overdue items"}):it.map((e=>rt(e)))]})]})]}),(0,ce.jsxs)(D.A,{open:ie,onClose:()=>le(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:24}},children:[(0,ce.jsx)(I.A,{sx:{pb:2,borderBottom:"1px solid",borderColor:"divider"},children:me?"Edit Reminder":"New Reminder"}),(0,ce.jsx)(O.A,{children:(0,ce.jsxs)(i.A,{sx:{pt:3,display:"flex",flexDirection:"column",gap:2.5},children:[(0,ce.jsx)(y.A,{fullWidth:!0,label:"Title",name:"title",value:be.title,onChange:Qe,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,ce.jsx)(y.A,{fullWidth:!0,label:"Description",name:"description",multiline:!0,rows:3,value:be.description,onChange:Qe,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,ce.jsx)(y.A,{fullWidth:!0,label:"Date",type:"date",name:"date",value:be.date,onChange:Qe,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,ce.jsx)(y.A,{fullWidth:!0,label:"Time",type:"time",name:"time",value:be.time,onChange:Qe,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),(0,ce.jsxs)(x.A,{fullWidth:!0,children:[(0,ce.jsx)(P.A,{children:"Priority"}),(0,ce.jsxs)(T.A,{name:"priority",value:be.priority,onChange:Qe,label:"Priority",sx:{borderRadius:1},children:[(0,ce.jsx)(E.A,{value:"low",children:"Low"}),(0,ce.jsx)(E.A,{value:"medium",children:"Medium"}),(0,ce.jsx)(E.A,{value:"high",children:"High"})]})]}),(0,ce.jsxs)(x.A,{fullWidth:!0,children:[(0,ce.jsx)(P.A,{children:"Repeat"}),(0,ce.jsxs)(T.A,{name:"recurring",value:be.recurring||"",onChange:Qe,label:"Repeat",sx:{borderRadius:1},children:[(0,ce.jsx)(E.A,{value:"",children:"Never"}),(0,ce.jsx)(E.A,{value:"daily",children:"Daily"}),(0,ce.jsx)(E.A,{value:"weekly",children:"Weekly"}),(0,ce.jsx)(E.A,{value:"monthly",children:"Monthly"}),(0,ce.jsx)(E.A,{value:"yearly",children:"Yearly"})]})]}),(0,ce.jsxs)(i.A,{children:[(0,ce.jsx)(c.A,{variant:"subtitle2",sx:{mb:1},children:"Assign to People"}),(0,ce.jsxs)(i.A,{sx:{display:"flex",gap:1,mb:1},children:[(0,ce.jsx)(y.A,{fullWidth:!0,size:"small",placeholder:"Enter email address",value:Le,onChange:e=>Ye(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Ze())}}),(0,ce.jsx)(m.A,{variant:"outlined",startIcon:(0,ce.jsx)(q.A,{}),onClick:Ze,size:"small",children:"Add"})]}),be.assignedTo.length>0&&(0,ce.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:et(be.assignedTo).map(((e,t)=>(0,ce.jsx)(l.A,{label:e,size:"small",onDelete:()=>(e=>{we((t=>({...t,assignedTo:t.assignedTo.filter((t=>t!==e))})))})(be.assignedTo[t]),deleteIcon:(0,ce.jsx)(H.A,{})},be.assignedTo[t])))})]}),(0,ce.jsx)(v.A,{control:(0,ce.jsx)(j.A,{checked:be.notification,onChange:Qe,name:"notification",color:"primary"}),label:"Enable Notifications"})]})}),(0,ce.jsxs)(S.A,{sx:{px:3,py:2,gap:1},children:[(0,ce.jsx)(m.A,{onClick:()=>le(!1),sx:{borderRadius:1,textTransform:"none"},children:"Cancel"}),(0,ce.jsx)(m.A,{onClick:async t=>{if(t.preventDefault(),null===e||void 0===e||!e.$id)return void he("Not authenticated");if(!be.title.trim())return void he("Title is required");he(""),ye("");const r={title:be.title,description:be.description,date:be.date,time:be.time,notification:be.notification,priority:be.priority,assignedTo:be.assignedTo||[],recurring:be.recurring||null};me?ze.mutate({reminderId:me.id,reminderData:r}):$e.mutate(r),le(!1)},variant:"contained",disabled:$e.isLoading||ze.isLoading||!be.title.trim(),sx:{borderRadius:1,textTransform:"none"},children:$e.isLoading||ze.isLoading?me?"Updating...":"Creating...":me?"Update":"Create"})]})]})]})}},9511:(e,t,r)=>{r.r(t),r.d(t,{addUserToAccessGroup:()=>m,createProject:()=>o,default:()=>p,deleteProject:()=>u,getProject:()=>c,listProjects:()=>d,removeUserFromAccessGroup:()=>A,updateProject:()=>l});var n=r(5404),a=r(5460);const i="69181c670024df0dd32b",s={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7";async function o(e,t){try{const{name:r,description:o,status:d="Not Started",colorTag:c="#1976d2",accessGroup:l=[]}=t;if(!r||!r.trim())throw new Error("Project name is required");const u="PRJ-"+Date.now().toString(36).toUpperCase()+"-"+Math.random().toString(36).substr(2,5).toUpperCase(),m=(new Date).toISOString(),A=[a.aX.read(a.Xh.user(e)),a.aX.update(a.Xh.user(e)),a.aX.delete(a.Xh.user(e)),...l.map((e=>a.aX.read(a.Xh.user(e)))),...l.map((e=>a.aX.update(a.Xh.user(e))))];return await n.LL.createDocument(i,s,a.ID.unique(),{ownerId:e,name:r.trim(),description:o||"",projectId:u,status:d,colorTag:c,accessGroup:Array.isArray(l)?l:[],createdAt:m,updatedAt:m},A)}catch(r){throw console.error("Error creating project:",r),r}}async function d(e){try{const t=await n.LL.listDocuments(i,s,[a.XK.equal("ownerId",e)]),r=await n.LL.listDocuments(i,s,[a.XK.search("accessGroup",e)]),o=[...t.documents||[],...r.documents||[]];return Array.from(new Map(o.map((e=>[e.$id,e]))).values())}catch(t){return console.error("Error listing projects:",t),[]}}async function c(e){try{return await n.LL.getDocument(i,s,e)}catch(t){throw console.error("Error getting project:",t),t}}async function l(e,t){try{const r={...t,updatedAt:(new Date).toISOString()};return await n.LL.updateDocument(i,s,e,r)}catch(r){throw console.error("Error updating project:",r),r}}async function u(e){try{return await n.LL.deleteDocument(i,s,e)}catch(t){throw console.error("Error deleting project:",t),t}}async function m(e,t){try{const r=await n.LL.getDocument(i,s,e),o="6918f632002d42536ab2",d=await n.LL.listDocuments(i,o,[a.XK.equal("email",t.toLowerCase())]);if(!d.documents||0===d.documents.length)throw new Error("User not found with that email");const c=d.documents[0].userId,l=r.accessGroup||[];if(l.includes(c))throw new Error("User is already in the access group");const u=[...l,c];return await n.LL.updateDocument(i,s,e,{accessGroup:u,updatedAt:(new Date).toISOString()})}catch(r){throw console.error("Error adding user to access group:",r),r}}async function A(e,t){try{const r=await n.LL.getDocument(i,s,e),a=(r.accessGroup||[]).filter((e=>e!==t));return await n.LL.updateDocument(i,s,e,{accessGroup:a,updatedAt:(new Date).toISOString()})}catch(r){throw console.error("Error removing user from access group:",r),r}}const p={createProject:o,listProjects:d,getProject:c,updateProject:l,deleteProject:u,addUserToAccessGroup:m,removeUserFromAccessGroup:A}}}]);
//# sourceMappingURL=781.92fa02d5.chunk.js.map