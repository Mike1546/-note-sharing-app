"use strict";(self.webpackChunknote_sharing_app_client=self.webpackChunknote_sharing_app_client||[]).push([[97],{640:(e,t,a)=>{a.r(t),a.d(t,{createMessage:()=>i,default:()=>u,deleteMessage:()=>l,listMessages:()=>c,updateMessage:()=>d});var s=a(5404),r=a(5460);const n="69181c670024df0dd32b",o={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECT_MESSAGES||"691fbecd000ac88f46a2";async function i(e){try{const{projectId:t,taskId:a=null,userId:i,userName:c,message:d,messageDate:l=null}=e;if(!t||!i||!d||!d.trim())throw new Error("projectId, userId, and message are required");const u={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",A=await s.LL.getDocument(n,u,t),P=[r.aX.read(r.Xh.user(A.ownerId)),r.aX.write(r.Xh.user(A.ownerId)),r.aX.update(r.Xh.user(A.ownerId)),r.aX.delete(r.Xh.user(A.ownerId)),...(A.accessGroup||[]).map((e=>r.aX.read(r.Xh.user(e)))),...(A.accessGroup||[]).map((e=>r.aX.write(r.Xh.user(e))))];return await s.LL.createDocument(n,o,r.ID.unique(),{projectId:t,taskId:a||null,userId:i,userName:c||"Unknown User",message:d.trim(),messageDate:l?new Date(l).toISOString():(new Date).toISOString(),createdAt:(new Date).toISOString()},P)}catch(t){throw console.error("Error creating message:",t),t}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{projectId:t=null,taskId:a=null,sortBy:i="newest"}=e,c=[];t&&c.push(r.XK.equal("projectId",t)),a&&c.push(r.XK.equal("taskId",a));let d=(await s.LL.listDocuments(n,o,c)).documents||[];return"newest"===i?d.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))):d.sort(((e,t)=>new Date(e.createdAt)-new Date(t.createdAt))),d}catch(a){var t;return 404===a.code||null!==(t=a.message)&&void 0!==t&&t.includes("not be found")?(console.warn("[ProjectMessages] Collection not found, returning empty array"),[]):(console.error("Error listing messages:",a),[])}}async function d(e,t){try{return await s.LL.updateDocument(n,o,e,t)}catch(a){throw console.error("Error updating message:",a),a}}async function l(e){try{return await s.LL.deleteDocument(n,o,e)}catch(t){throw console.error("Error deleting message:",t),t}}const u={createMessage:i,listMessages:c,updateMessage:d,deleteMessage:l}},1097:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var s=a(5043),r=a(9252),n=a(5865),o=a(6446),i=a(3845),c=a(3438),d=a(547),l=a(4912),u=a(4056),A=a(8903),P=a(2110),_=a(6494),E=a(7600),T=a(5721),m=a(4628),p=a(8734),h=a(9336),C=a(3193),I=a(9190),g=a(598),R=a(2143),y=a(8266),O=a(35),S=a(6600),f=a(5316),L=a(7784),x=a(9347),j=a(5626),D=a(3560),v=a(141),w=a(7225),b=a(3216),N=a(5016),W=a(6931),U=a(3248),k=a(7097),M=a(9511),Y=a(4155),B=a(3835),X=a(640);const K=e=>(0,W.I)({queryKey:["tasks",e],queryFn:async()=>await Y.Ay.listTasks(e),enabled:!!e,staleTime:6e4}),q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,W.I)({queryKey:["activityLogs",e,t],queryFn:async()=>await B.default.listActivityLogs({projectId:e,taskId:t,sortBy:"newest"}),enabled:!!e,staleTime:6e4})},F=()=>{const e=(0,U.jE)();return(0,k.n)({mutationFn:async e=>{let{projectId:t,taskData:a,userId:s}=e;return await Y.Ay.createTask(t,a,s)},onSuccess:(t,a)=>{e.invalidateQueries(["tasks",a.projectId]),e.invalidateQueries(["activityLogs",a.projectId])}})};var H=a(446),V=a.n(H),G=a(579);const J=()=>{const{id:e}=(0,b.g)(),t=(0,b.Zp)(),{user:Y}=(0,N.A)(),[B,H]=(0,s.useState)([]),[J,$]=(0,s.useState)("all"),[Q,z]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(""),[te,ae]=(0,s.useState)(""),[se,re]=(0,s.useState)(0),[ne,oe]=(0,s.useState)(!1),[ie,ce]=(0,s.useState)(!1),[de,le]=(0,s.useState)(!1),[ue,Ae]=(0,s.useState)(""),[Pe,_e]=(0,s.useState)({title:"",description:"",dueDate:"",priority:"Medium",status:"Not Started"}),[Ee,Te]=(0,s.useState)({message:"",messageDate:V()().format("YYYY-MM-DD")}),{data:me,isLoading:pe}=(he=e,Ce=null===Y||void 0===Y?void 0:Y.$id,(0,W.I)({queryKey:["project",he],queryFn:async()=>await M.default.getProject(he),enabled:!!he&&!!Ce,staleTime:12e4}));var he,Ce;const{data:Ie=[],isLoading:ge}=K(e),{data:Re=[],isLoading:ye}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,W.I)({queryKey:["messages",e,t],queryFn:async()=>await X.default.listMessages({projectId:e,taskId:t,sortBy:"newest"}),enabled:!!e,staleTime:3e4})}(e),{data:Oe=[],isLoading:Se}=q(e),fe=F(),Le=(()=>{const e=(0,U.jE)();return(0,k.n)({mutationFn:async e=>await X.default.createMessage(e),onSuccess:(t,a)=>{e.invalidateQueries(["messages",a.projectId,a.taskId]),e.invalidateQueries(["activityLogs",a.projectId])}})})();(0,s.useEffect)((()=>{H("all"===J?Oe:Oe.filter((e=>e.category===J)))}),[J,Oe]);const xe=e=>!!e&&(new Date(e)<new Date&&new Date(e).toDateString()!==(new Date).toDateString());return pe||!me?(0,G.jsx)(r.A,{maxWidth:"lg",sx:{py:4},children:(0,G.jsx)(n.A,{children:"Loading project..."})}):(0,G.jsxs)(r.A,{maxWidth:"lg",sx:{py:4},children:[(0,G.jsxs)(o.A,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,G.jsxs)(o.A,{children:[(0,G.jsx)(n.A,{variant:"h4",sx:{fontWeight:"bold",color:"primary.main",mb:1},children:me.name}),(0,G.jsxs)(o.A,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,G.jsx)(i.A,{label:me.status,size:"small",color:"Active"===me.status?"primary":"Completed"===me.status?"success":"default"}),(0,G.jsxs)(n.A,{variant:"body2",color:"text.secondary",children:["ID: ",me.projectId]}),(0,G.jsx)(o.A,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:me.colorTag||"#1976d2",border:"1px solid #ccc"}})]})]}),(0,G.jsxs)(o.A,{sx:{display:"flex",gap:1},children:[(0,G.jsx)(c.A,{variant:"outlined",startIcon:(0,G.jsx)(j.A,{}),onClick:()=>ce(!0),sx:{borderRadius:1,textTransform:"none"},children:"Add Member"}),(0,G.jsx)(c.A,{variant:"outlined",startIcon:(0,G.jsx)(D.A,{}),onClick:()=>t(`/projects/${e}/edit`),sx:{borderRadius:1,textTransform:"none"},children:"Edit"})]})]}),Z&&(0,G.jsx)(d.A,{severity:"error",sx:{mb:2},onClose:()=>ee(""),children:Z}),te&&(0,G.jsx)(d.A,{severity:"success",sx:{mb:2},onClose:()=>ae(""),children:te}),(0,G.jsx)(n.A,{variant:"body1",sx:{mb:3,color:"text.secondary"},children:me.description||"No description"}),(0,G.jsx)(o.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,G.jsxs)(l.A,{value:se,onChange:(e,t)=>re(t),children:[(0,G.jsx)(u.A,{label:"Tasks"}),(0,G.jsx)(u.A,{label:"Messages"}),(0,G.jsx)(u.A,{label:"Activity Log"})]})}),0===se&&(0,G.jsxs)(o.A,{children:[(0,G.jsxs)(o.A,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,G.jsx)(n.A,{variant:"h6",children:"Tasks"}),(0,G.jsx)(c.A,{variant:"contained",startIcon:(0,G.jsx)(v.A,{}),onClick:()=>oe(!0),sx:{borderRadius:1,textTransform:"none"},children:"Add Task"})]}),(0,G.jsx)(A.Ay,{container:!0,spacing:2,children:0===Ie.length?(0,G.jsx)(A.Ay,{item:!0,xs:12,children:(0,G.jsx)(P.A,{children:(0,G.jsx)(_.A,{sx:{textAlign:"center",py:4},children:(0,G.jsx)(n.A,{color:"text.secondary",children:"No tasks yet. Create your first task!"})})})}):Ie.map((a=>{return(0,G.jsx)(A.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,G.jsxs)(P.A,{sx:{height:"100%",borderLeft:"4px solid "+("Critical"===a.priority?"#d32f2f":"High"===a.priority?"#f57c00":"Medium"===a.priority?"#fbc02d":"#388e3c"),...xe(a.dueDate)&&{border:"2px solid #d32f2f",backgroundColor:"error.lighter"}},children:[(0,G.jsxs)(_.A,{children:[(0,G.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,G.jsx)(n.A,{variant:"h6",sx:{fontWeight:"medium",flexGrow:1},children:a.title}),(0,G.jsx)(i.A,{label:a.priority,size:"small",color:(r=a.priority,{Low:"success",Medium:"warning",High:"error",Critical:"error"}[r]||"default")})]}),(0,G.jsx)(n.A,{variant:"body2",color:"text.secondary",sx:{mb:1,minHeight:40},children:a.description||"No description"}),a.dueDate&&(0,G.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:.5,mb:1},children:[(0,G.jsx)(w.A,{fontSize:"small",color:xe(a.dueDate)?"error":"action"}),(0,G.jsxs)(n.A,{variant:"caption",color:xe(a.dueDate)?"error.main":"text.secondary",sx:{fontWeight:xe(a.dueDate)?"bold":"normal"},children:[V()(a.dueDate).format("MMM D, YYYY"),xe(a.dueDate)&&" (Overdue)"]}),(0,G.jsx)(c.A,{size:"small",onClick:()=>t(`/calendar?date=${V()(a.dueDate).format("YYYY-MM-DD")}`),sx:{ml:1,textTransform:"none",fontSize:"0.7rem"},children:"View in Calendar"})]}),(0,G.jsx)(i.A,{label:a.status,size:"small",color:(s=a.status,{"Not Started":"default",Active:"primary",Blocked:"warning",Completed:"success"}[s]||"default"),sx:{mt:1}})]}),(0,G.jsx)(E.A,{children:(0,G.jsx)(c.A,{size:"small",onClick:()=>t(`/projects/${e}/tasks/${a.$id}`),sx:{textTransform:"none"},children:"View Details"})})]})},a.$id);var s,r}))})]}),1===se&&(0,G.jsxs)(o.A,{children:[(0,G.jsxs)(o.A,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,G.jsx)(n.A,{variant:"h6",children:"Project Messages"}),(0,G.jsx)(c.A,{variant:"contained",startIcon:(0,G.jsx)(v.A,{}),onClick:()=>le(!0),sx:{borderRadius:1,textTransform:"none"},children:"Post Message"})]}),(0,G.jsx)(T.A,{children:0===Re.length?(0,G.jsx)(m.Ay,{children:(0,G.jsx)(p.A,{primary:"No messages yet. Post an update to keep the team informed!"})}):Re.map(((e,t)=>(0,G.jsxs)(s.Fragment,{children:[(0,G.jsx)(m.Ay,{children:(0,G.jsx)(p.A,{primary:e.message,secondary:(0,G.jsx)(o.A,{children:(0,G.jsxs)(n.A,{variant:"caption",color:"text.secondary",children:[e.userName," \u2022 ",V()(e.messageDate).format("MMMM D, YYYY")," \u2022 ",V()(e.createdAt).format("h:mm A")]})})})}),t<Re.length-1&&(0,G.jsx)(h.A,{})]},e.$id)))})]}),2===se&&(0,G.jsxs)(o.A,{children:[(0,G.jsxs)(o.A,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,G.jsx)(n.A,{variant:"h6",children:"Activity Log"}),(0,G.jsxs)(C.A,{size:"small",sx:{minWidth:150},children:[(0,G.jsx)(I.A,{children:"Filter"}),(0,G.jsxs)(g.A,{value:J,onChange:e=>$(e.target.value),label:"Filter",children:[(0,G.jsx)(R.A,{value:"all",children:"All Activity"}),(0,G.jsx)(R.A,{value:"Project Update",children:"Project Updates"}),(0,G.jsx)(R.A,{value:"Task Update",children:"Task Updates"}),(0,G.jsx)(R.A,{value:"Status Change",children:"Status Changes"}),(0,G.jsx)(R.A,{value:"Comment Added",children:"Comments"})]})]})]}),(0,G.jsx)(T.A,{children:0===B.length?(0,G.jsx)(m.Ay,{children:(0,G.jsx)(p.A,{primary:0===Oe.length?"No activity yet":"No activity matches filter"})}):B.map(((e,t)=>(0,G.jsxs)(s.Fragment,{children:[(0,G.jsxs)(m.Ay,{children:[(0,G.jsx)(p.A,{primary:e.action,secondary:(0,G.jsxs)(o.A,{children:[(0,G.jsxs)(n.A,{variant:"caption",color:"text.secondary",children:[e.userName," \u2022 ",V()(e.timestamp).format("MMM D, YYYY h:mm A")]}),e.oldValue&&e.newValue&&(0,G.jsxs)(n.A,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:[e.oldValue," \u2192 ",e.newValue]})]})}),(0,G.jsx)(y.A,{children:(0,G.jsx)(i.A,{label:e.category,size:"small"})})]}),t<B.length-1&&(0,G.jsx)(h.A,{})]},e.$id)))})]}),(0,G.jsxs)(O.A,{open:ne,onClose:()=>oe(!1),maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"New Task"}),(0,G.jsx)(f.A,{children:(0,G.jsxs)(o.A,{sx:{pt:2,display:"flex",flexDirection:"column",gap:2},children:[(0,G.jsx)(L.A,{fullWidth:!0,label:"Task Title",value:Pe.title,onChange:e=>_e((t=>({...t,title:e.target.value}))),required:!0}),(0,G.jsx)(L.A,{fullWidth:!0,label:"Description",value:Pe.description,onChange:e=>_e((t=>({...t,description:e.target.value}))),multiline:!0,rows:3}),(0,G.jsx)(L.A,{fullWidth:!0,label:"Due Date",type:"date",value:Pe.dueDate,onChange:e=>_e((t=>({...t,dueDate:e.target.value}))),InputLabelProps:{shrink:!0}}),(0,G.jsxs)(C.A,{fullWidth:!0,children:[(0,G.jsx)(I.A,{children:"Priority"}),(0,G.jsxs)(g.A,{value:Pe.priority,onChange:e=>_e((t=>({...t,priority:e.target.value}))),label:"Priority",children:[(0,G.jsx)(R.A,{value:"Low",children:"Low"}),(0,G.jsx)(R.A,{value:"Medium",children:"Medium"}),(0,G.jsx)(R.A,{value:"High",children:"High"}),(0,G.jsx)(R.A,{value:"Critical",children:"Critical"})]})]})]})}),(0,G.jsxs)(x.A,{children:[(0,G.jsx)(c.A,{onClick:()=>oe(!1),children:"Cancel"}),(0,G.jsx)(c.A,{onClick:async()=>{if(Pe.title.trim()){z(!0);try{await fe.mutateAsync({projectId:e,taskData:Pe,userId:Y.$id});const t=(await Promise.resolve().then(a.bind(a,3835))).default;await t.createActivityLog({projectId:e,userId:Y.$id,userName:Y.name||Y.email,category:"Task Update",action:`Created task: ${Pe.title}`,newValue:Pe.title}),ae("Task created successfully"),oe(!1),_e({title:"",description:"",dueDate:"",priority:"Medium",status:"Not Started"}),setTimeout((()=>ae("")),3e3)}catch(s){var t;404===s.code?ee("Task feature is not set up yet. Please contact an administrator."):null!==(t=s.message)&&void 0!==t&&t.includes("permissions")?ee("You do not have permission to create tasks in this project."):ee((null===s||void 0===s?void 0:s.message)||"Failed to create task")}finally{z(!1)}}else ee("Task title is required")},variant:"contained",disabled:Q||!Pe.title.trim(),children:"Create"})]})]}),(0,G.jsxs)(O.A,{open:ie,onClose:()=>ce(!1),maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Add Member to Project"}),(0,G.jsx)(f.A,{children:(0,G.jsx)(L.A,{fullWidth:!0,label:"Email Address",type:"email",value:ue,onChange:e=>Ae(e.target.value),sx:{mt:2},placeholder:"user@example.com"})}),(0,G.jsxs)(x.A,{children:[(0,G.jsx)(c.A,{onClick:()=>ce(!1),children:"Cancel"}),(0,G.jsx)(c.A,{onClick:async()=>{if(ue.trim())try{const t=(await Promise.resolve().then(a.bind(a,9511))).default;await t.addUserToAccessGroup(e,ue.trim());const s=(await Promise.resolve().then(a.bind(a,3835))).default;await s.createActivityLog({projectId:e,userId:Y.$id,userName:Y.name||Y.email,category:"Project Update",action:`Added ${ue} to access group`,newValue:ue}),ae("Member added successfully"),ce(!1),Ae(""),setTimeout((()=>ae("")),3e3)}catch(s){var t;404===s.code?ee("User not found. Please check the email address."):null!==(t=s.message)&&void 0!==t&&t.includes("already")?ee("User is already a member of this project."):ee((null===s||void 0===s?void 0:s.message)||"Failed to add member")}else ee("Please enter an email address")},variant:"contained",disabled:!ue.trim(),children:"Add Member"})]})]}),(0,G.jsxs)(O.A,{open:de,onClose:()=>le(!1),maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Post Message"}),(0,G.jsx)(f.A,{children:(0,G.jsxs)(o.A,{sx:{pt:2,display:"flex",flexDirection:"column",gap:2},children:[(0,G.jsx)(L.A,{fullWidth:!0,label:"Message Date",type:"date",value:Ee.messageDate,onChange:e=>Te((t=>({...t,messageDate:e.target.value}))),InputLabelProps:{shrink:!0}}),(0,G.jsx)(L.A,{fullWidth:!0,label:"Message",value:Ee.message,onChange:e=>Te((t=>({...t,message:e.target.value}))),multiline:!0,rows:4,placeholder:"Share updates, progress, or important information with your team...",required:!0})]})}),(0,G.jsxs)(x.A,{children:[(0,G.jsx)(c.A,{onClick:()=>le(!1),children:"Cancel"}),(0,G.jsx)(c.A,{onClick:async()=>{if(Ee.message.trim()){z(!0);try{await Le.mutateAsync({projectId:e,userId:Y.$id,userName:Y.name||Y.email,message:Ee.message,messageDate:Ee.messageDate});const t=(await Promise.resolve().then(a.bind(a,3835))).default;await t.createActivityLog({projectId:e,userId:Y.$id,userName:Y.name||Y.email,category:"Comment Added",action:"Posted a message",newValue:Ee.message.substring(0,50)+"..."}),ae("Message posted successfully"),le(!1),Te({message:"",messageDate:V()().format("YYYY-MM-DD")}),setTimeout((()=>ae("")),3e3)}catch(s){var t;404===s.code?ee("Messages feature is not set up yet. Please contact an administrator."):null!==(t=s.message)&&void 0!==t&&t.includes("permissions")?ee("You do not have permission to post messages in this project."):ee((null===s||void 0===s?void 0:s.message)||"Failed to post message")}finally{z(!1)}}else ee("Message is required")},variant:"contained",disabled:Q||!Ee.message.trim(),children:"Post"})]})]})]})}},3835:(e,t,a)=>{a.r(t),a.d(t,{createActivityLog:()=>i,default:()=>d,listActivityLogs:()=>c});var s=a(5404),r=a(5460);const n="69181c670024df0dd32b",o={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_ACTIVITY_LOGS||"691fba55002692c63497";async function i(e){try{const{projectId:a=null,taskId:i=null,userId:c,userName:d,category:l,action:u,oldValue:A=null,newValue:P=null}=e;if(!c||!l||!u)throw new Error("userId, category, and action are required");let _=[r.aX.read(r.Xh.users())];if(a){const e={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7";try{const t=await s.LL.getDocument(n,e,a);_=[r.aX.read(r.Xh.user(t.ownerId)),...(t.accessGroup||[]).map((e=>r.aX.read(r.Xh.user(e))))]}catch(t){}}return await s.LL.createDocument(n,o,r.ID.unique(),{projectId:a||null,taskId:i||null,userId:c,userName:d||"Unknown User",category:l,action:u,oldValue:A||null,newValue:P||null,timestamp:(new Date).toISOString()},_)}catch(a){throw console.error("Error creating activity log:",a),a}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{projectId:t=null,taskId:a=null,category:i=null,userId:c=null,search:d="",sortBy:l="newest"}=e,u=[];t&&u.push(r.XK.equal("projectId",t)),a&&u.push(r.XK.equal("taskId",a)),i&&u.push(r.XK.equal("category",i)),c&&u.push(r.XK.equal("userId",c));let A=(await s.LL.listDocuments(n,o,u)).documents||[];if(d){const e=d.toLowerCase();A=A.filter((t=>{var a,s,r;return(null===(a=t.action)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(s=t.userName)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(r=t.category)||void 0===r?void 0:r.toLowerCase().includes(e))}))}return"newest"===l?A.sort(((e,t)=>new Date(t.timestamp)-new Date(e.timestamp))):A.sort(((e,t)=>new Date(e.timestamp)-new Date(t.timestamp))),A}catch(t){return console.error("Error listing activity logs:",t),[]}}const d={createActivityLog:i,listActivityLogs:c}},4155:(e,t,a)=>{a.d(t,{Ay:()=>c});var s=a(5404),r=a(5460);const n="69181c670024df0dd32b",o={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_TASKS||"691fba3e0012d16c1016";async function i(e){try{const t=await s.LL.listDocuments(n,o,[r.XK.equal("projectId",e)]);return(t.documents||[]).map((e=>({...e,subtasks:e.subtasks?JSON.parse(e.subtasks):[],attachments:e.attachments?JSON.parse(e.attachments):[]})))}catch(t){return console.error("Error listing tasks:",t),[]}}const c={createTask:async function(e,t,a){try{const{title:i,description:c="",dueDate:d=null,priority:l="Medium",status:u="Not Started",subtasks:A=[],attachments:P=[]}=t;if(!i||!i.trim())throw new Error("Task title is required");const _=(new Date).toISOString(),E={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",T=await s.LL.getDocument(n,E,e),m=[r.aX.read(r.Xh.user(T.ownerId)),r.aX.update(r.Xh.user(T.ownerId)),r.aX.delete(r.Xh.user(T.ownerId)),...(T.accessGroup||[]).map((e=>r.aX.read(r.Xh.user(e)))),...(T.accessGroup||[]).map((e=>r.aX.update(r.Xh.user(e))))],p={projectId:e,title:i.trim(),description:c,dueDate:d?new Date(d).toISOString():null,priority:l,status:u,subtasks:JSON.stringify(Array.isArray(A)?A:[]),attachments:JSON.stringify(Array.isArray(P)?P:[]),createdAt:_,updatedAt:_,createdBy:a};return await s.LL.createDocument(n,o,r.ID.unique(),p,m)}catch(i){throw console.error("Error creating task:",i),i}},listTasks:i,getTask:async function(e){try{const t=await s.LL.getDocument(n,o,e);return{...t,subtasks:t.subtasks?JSON.parse(t.subtasks):[],attachments:t.attachments?JSON.parse(t.attachments):[]}}catch(t){throw console.error("Error getting task:",t),t}},updateTask:async function(e,t){try{const a={...t,updatedAt:(new Date).toISOString()};return a.subtasks&&(a.subtasks=JSON.stringify(Array.isArray(a.subtasks)?a.subtasks:[])),a.attachments&&(a.attachments=JSON.stringify(Array.isArray(a.attachments)?a.attachments:[])),delete a.comments,a.dueDate&&(a.dueDate=new Date(a.dueDate).toISOString()),await s.LL.updateDocument(n,o,e,a)}catch(a){throw console.error("Error updating task:",a),a}},deleteTask:async function(e){try{return await s.LL.deleteDocument(n,o,e)}catch(t){throw console.error("Error deleting task:",t),t}},getOverdueTasks:async function(e){try{const t={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7",a=await s.LL.listDocuments(n,t,[r.XK.equal("ownerId",e)]),o=await s.LL.listDocuments(n,t,[r.XK.search("accessGroup",e)]),c=[...a.documents||[],...o.documents||[]],d=Array.from(new Set(c.map((e=>e.$id)))),l=(new Date).toISOString(),u=[];for(const e of d){const t=(await i(e)).filter((e=>e.dueDate&&new Date(e.dueDate)<new Date(l)&&"Completed"!==e.status));u.push(...t)}return u}catch(t){return console.error("Error getting overdue tasks:",t),[]}}}},5626:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(9662),r=a(579);const n=(0,s.A)((0,r.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},7225:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(9662),r=a(579);const n=(0,s.A)((0,r.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday")},7600:(e,t,a)=>{a.d(t,{A:()=>T});var s=a(8587),r=a(8168),n=a(5043),o=a(8387),i=a(5049),c=a(4535),d=a(2876),l=a(4987),u=a(239);function A(e){return(0,u.Ay)("MuiCardActions",e)}(0,l.A)("MuiCardActions",["root","spacing"]);var P=a(579);const _=["disableSpacing","className"],E=(0,c.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,r.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),T=n.forwardRef((function(e,t){const a=(0,d.A)({props:e,name:"MuiCardActions"}),{disableSpacing:n=!1,className:c}=a,l=(0,s.A)(a,_),u=(0,r.A)({},a,{disableSpacing:n}),T=(e=>{const{classes:t,disableSpacing:a}=e,s={root:["root",!a&&"spacing"]};return(0,i.A)(s,A,t)})(u);return(0,P.jsx)(E,(0,r.A)({className:(0,o.A)(T.root,c),ownerState:u,ref:t},l))}))},9511:(e,t,a)=>{a.r(t),a.d(t,{addUserToAccessGroup:()=>A,createProject:()=>i,default:()=>_,deleteProject:()=>u,getProject:()=>d,listProjects:()=>c,removeUserFromAccessGroup:()=>P,updateProject:()=>l});var s=a(5404),r=a(5460);const n="69181c670024df0dd32b",o={NODE_ENV:"production",PUBLIC_URL:"/-note-sharing-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://note-sharing-app.onrender.com",REACT_APP_APPWRITE_COLLECTION_GROUPS:"6918f637002e49bd5482",REACT_APP_APPWRITE_COLLECTION_NOTES:"6918f63400264192256d",REACT_APP_APPWRITE_COLLECTION_PASSWORDS:"6918f63900228f33e93c",REACT_APP_APPWRITE_COLLECTION_PROFILES:"6918f632002d42536ab2",REACT_APP_APPWRITE_DATABASE_ID:"69181c670024df0dd32b",REACT_APP_APPWRITE_ENDPOINT:"https://nyc.cloud.appwrite.io/v1",REACT_APP_APPWRITE_PROJECT:"691815b8003ae6a0e161",REACT_APP_ENCRYPTION_KEY:"AumLB6URqqyU5pUr3MNCTsEDlBIeQUaCOVBIyYYBl/U="}.REACT_APP_APPWRITE_COLLECTION_PROJECTS||"691fba2b0003b7a35fc7";async function i(e,t){try{const{name:a,description:i,status:c="Not Started",colorTag:d="#1976d2",accessGroup:l=[]}=t;if(!a||!a.trim())throw new Error("Project name is required");const u="PRJ-"+Date.now().toString(36).toUpperCase()+"-"+Math.random().toString(36).substr(2,5).toUpperCase(),A=(new Date).toISOString(),P=[r.aX.read(r.Xh.user(e)),r.aX.update(r.Xh.user(e)),r.aX.delete(r.Xh.user(e)),...l.map((e=>r.aX.read(r.Xh.user(e)))),...l.map((e=>r.aX.update(r.Xh.user(e))))];return await s.LL.createDocument(n,o,r.ID.unique(),{ownerId:e,name:a.trim(),description:i||"",projectId:u,status:c,colorTag:d,accessGroup:Array.isArray(l)?l:[],createdAt:A,updatedAt:A},P)}catch(a){throw console.error("Error creating project:",a),a}}async function c(e){try{const t=await s.LL.listDocuments(n,o,[r.XK.equal("ownerId",e)]),a=await s.LL.listDocuments(n,o,[r.XK.search("accessGroup",e)]),i=[...t.documents||[],...a.documents||[]];return Array.from(new Map(i.map((e=>[e.$id,e]))).values())}catch(t){return console.error("Error listing projects:",t),[]}}async function d(e){try{return await s.LL.getDocument(n,o,e)}catch(t){throw console.error("Error getting project:",t),t}}async function l(e,t){try{const a={...t,updatedAt:(new Date).toISOString()};return await s.LL.updateDocument(n,o,e,a)}catch(a){throw console.error("Error updating project:",a),a}}async function u(e){try{return await s.LL.deleteDocument(n,o,e)}catch(t){throw console.error("Error deleting project:",t),t}}async function A(e,t){try{const a=await s.LL.getDocument(n,o,e),i="6918f632002d42536ab2",c=await s.LL.listDocuments(n,i,[r.XK.equal("email",t.toLowerCase())]);if(!c.documents||0===c.documents.length)throw new Error("User not found with that email");const d=c.documents[0].userId,l=a.accessGroup||[];if(l.includes(d))throw new Error("User is already in the access group");const u=[...l,d];return await s.LL.updateDocument(n,o,e,{accessGroup:u,updatedAt:(new Date).toISOString()})}catch(a){throw console.error("Error adding user to access group:",a),a}}async function P(e,t){try{const a=await s.LL.getDocument(n,o,e),r=(a.accessGroup||[]).filter((e=>e!==t));return await s.LL.updateDocument(n,o,e,{accessGroup:r,updatedAt:(new Date).toISOString()})}catch(a){throw console.error("Error removing user from access group:",a),a}}const _={createProject:i,listProjects:c,getProject:d,updateProject:l,deleteProject:u,addUserToAccessGroup:A,removeUserFromAccessGroup:P}}}]);
//# sourceMappingURL=97.f728963c.chunk.js.map