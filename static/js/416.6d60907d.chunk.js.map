{"version":3,"file":"static/js/416.6d60907d.chunk.js","mappings":"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","sources":["components/notes/NoteGroupList.js","components/notes/NoteGroupForm.js","components/common/CardSkeleton.js","components/Dashboard.js","hooks/useNotes.js","hooks/useGroups.js","services/db.js","services/groups.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryAction,\r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  TextField,\r\n  Typography,\r\n  Box,\r\n  Chip,\r\n  Alert,\r\n  Card,\r\n  CardContent,\r\n  Collapse,\r\n  Grid\r\n} from '@mui/material';\r\nimport {\r\n  Delete as DeleteIcon,\r\n  PersonAdd as PersonAddIcon,\r\n  PersonRemove as PersonRemoveIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  ExpandLess as ExpandLessIcon,\r\n  Notes as NotesIcon\r\n} from '@mui/icons-material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport groupsService from '../../services/groups';\r\n\r\nconst NoteGroupList = ({ groups, onUpdate, onDelete, groupNotesMap = {} }) => {\r\n  const navigate = useNavigate();\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [selectedGroup, setSelectedGroup] = useState(null);\r\n  const [addMemberDialogOpen, setAddMemberDialogOpen] = useState(false);\r\n  const [newMemberEmail, setNewMemberEmail] = useState('');\r\n  const [newMemberNickname, setNewMemberNickname] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [expandedGroups, setExpandedGroups] = useState({});\r\n\r\n  const handleDeleteClick = (group) => {\r\n    setSelectedGroup(group);\r\n    setDeleteDialogOpen(true);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (onDelete) {\r\n      await onDelete(selectedGroup._id || selectedGroup.$id);\r\n    } else {\r\n      try {\r\n        await groupsService.deleteGroup(selectedGroup._id || selectedGroup.$id);\r\n        onUpdate();\r\n      } catch (err) {\r\n        console.error('Delete error:', err);\r\n        setError('Failed to delete group');\r\n        setTimeout(() => setError(''), 3000);\r\n        return;\r\n      }\r\n    }\r\n    setDeleteDialogOpen(false);\r\n    setSuccess('Group deleted successfully');\r\n    setTimeout(() => setSuccess(''), 3000);\r\n  };\r\n\r\n  const toggleGroupExpanded = (groupId) => {\r\n    setExpandedGroups(prev => ({\r\n      ...prev,\r\n      [groupId]: !prev[groupId]\r\n    }));\r\n  };\r\n\r\n  const handleAddMemberClick = (group) => {\r\n    setSelectedGroup(group);\r\n    setAddMemberDialogOpen(true);\r\n  };\r\n\r\n  const handleAddMember = async () => {\r\n    if (!newMemberEmail.trim()) {\r\n      setError('Please enter an email address');\r\n      setTimeout(() => setError(''), 3000);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      await groupsService.addMemberToGroup(\r\n        selectedGroup.$id || selectedGroup._id, \r\n        newMemberEmail.trim(),\r\n        newMemberNickname.trim()\r\n      );\r\n      setAddMemberDialogOpen(false);\r\n      setNewMemberEmail('');\r\n      setNewMemberNickname('');\r\n      setSuccess('Member added successfully');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n      onUpdate(); // Refresh the groups list\r\n    } catch (err) {\r\n      console.error('Add member error:', err);\r\n      setError(err?.message || 'Failed to add member');\r\n      setTimeout(() => setError(''), 5000);\r\n    }\r\n  };\r\n\r\n  const handleRemoveMember = async (groupId, userId) => {\r\n    try {\r\n      await groupsService.removeMemberFromGroup(groupId, userId);\r\n      setSuccess('Member removed successfully');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n      onUpdate(); // Refresh the groups list\r\n    } catch (err) {\r\n      console.error('Remove member error:', err);\r\n      setError(err?.message || 'Failed to remove member');\r\n      setTimeout(() => setError(''), 5000);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n      {success && (\r\n        <Alert severity=\"success\" sx={{ mb: 2 }}>\r\n          {success}\r\n        </Alert>\r\n      )}\r\n      <List>\r\n        {Array.isArray(groups) && groups.map((group) => {\r\n          const groupId = group._id || group.$id;\r\n          const groupNotes = groupNotesMap[groupId] || [];\r\n          const isExpanded = expandedGroups[groupId];\r\n          const noteCount = group.noteCount || groupNotes.length;\r\n\r\n          return (\r\n            <Card key={groupId} sx={{ mb: 2 }}>\r\n              <ListItem>\r\n                <ListItemText\r\n                  primary={\r\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                      <Typography variant=\"h6\">{group.name}</Typography>\r\n                      {noteCount > 0 && (\r\n                        <Chip\r\n                          label={`${noteCount} ${noteCount === 1 ? 'note' : 'notes'}`}\r\n                          size=\"small\"\r\n                          color=\"primary\"\r\n                          icon={<NotesIcon />}\r\n                        />\r\n                      )}\r\n                    </Box>\r\n                  }\r\n                  secondaryTypographyProps={{ component: 'div' }}\r\n                  secondary={\r\n                    <Box component=\"div\">\r\n                      {group.description && (\r\n                        <Typography component=\"div\" variant=\"body2\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\r\n                          {group.description}\r\n                        </Typography>\r\n                      )}\r\n                      <Box component=\"div\" sx={{ mt: 1, display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                        {group.membersWithInfo && Array.isArray(group.membersWithInfo) && group.membersWithInfo.length > 0 ? (\r\n                          group.membersWithInfo.map((member, index) => {\r\n                            const displayName = member.nickname || member.name || member.email || 'Unknown';\r\n                            return (\r\n                              <Chip\r\n                                key={member.userId || index}\r\n                                label={displayName}\r\n                                size=\"small\"\r\n                                color=\"default\"\r\n                                onDelete={() => handleRemoveMember(groupId, member.userId)}\r\n                                deleteIcon={<PersonRemoveIcon />}\r\n                                title={member.nickname ? `${member.name} (${member.email})` : member.email}\r\n                              />\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <Typography variant=\"caption\" color=\"text.secondary\">\r\n                            No members yet\r\n                          </Typography>\r\n                        )}\r\n                      </Box>\r\n                    </Box>\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <IconButton\r\n                    edge=\"end\"\r\n                    aria-label={isExpanded ? \"collapse\" : \"expand\"}\r\n                    onClick={() => toggleGroupExpanded(groupId)}\r\n                    sx={{ mr: 1 }}\r\n                  >\r\n                    {isExpanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n                  </IconButton>\r\n                  <IconButton\r\n                    edge=\"end\"\r\n                    aria-label=\"add member\"\r\n                    onClick={() => handleAddMemberClick(group)}\r\n                    sx={{ mr: 1 }}\r\n                  >\r\n                    <PersonAddIcon />\r\n                  </IconButton>\r\n                  <IconButton\r\n                    edge=\"end\"\r\n                    aria-label=\"delete\"\r\n                    onClick={() => handleDeleteClick(group)}\r\n                  >\r\n                    <DeleteIcon />\r\n                  </IconButton>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              \r\n              <Collapse in={isExpanded} timeout=\"auto\" unmountOnExit>\r\n                <CardContent sx={{ pt: 0 }}>\r\n                  {groupNotes.length === 0 ? (\r\n                    <Box sx={{ textAlign: 'center', py: 3 }}>\r\n                      <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                        No notes in this group yet\r\n                      </Typography>\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        startIcon={<NotesIcon />}\r\n                        onClick={() => navigate(`/notes/new?groupId=${groupId}`)}\r\n                        sx={{ mt: 1 }}\r\n                      >\r\n                        Add Note to Group\r\n                      </Button>\r\n                    </Box>\r\n                  ) : (\r\n                    <>\r\n                      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\r\n                        <Typography variant=\"subtitle2\" color=\"text.secondary\">\r\n                          {groupNotes.length} {groupNotes.length === 1 ? 'note' : 'notes'} in this group\r\n                        </Typography>\r\n                        <Button\r\n                          size=\"small\"\r\n                          variant=\"outlined\"\r\n                          startIcon={<NotesIcon />}\r\n                          onClick={() => navigate(`/notes/new?groupId=${groupId}`)}\r\n                        >\r\n                          Add Note\r\n                        </Button>\r\n                      </Box>\r\n                      <Grid container spacing={1}>\r\n                        {groupNotes.map((note) => (\r\n                          <Grid item xs={12} sm={6} key={note._id}>\r\n                            <Card\r\n                              variant=\"outlined\"\r\n                              sx={{\r\n                                cursor: 'pointer',\r\n                                '&:hover': {\r\n                                  backgroundColor: 'action.hover',\r\n                                },\r\n                              }}\r\n                              onClick={() => navigate(`/notes/${note._id}`)}\r\n                            >\r\n                              <CardContent sx={{ p: 1.5, '&:last-child': { pb: 1.5 } }}>\r\n                                <Typography variant=\"subtitle2\" noWrap>\r\n                                  {note.title || 'Untitled Note'}\r\n                                </Typography>\r\n                                <Typography\r\n                                  variant=\"caption\"\r\n                                  color=\"text.secondary\"\r\n                                  sx={{\r\n                                    display: 'block',\r\n                                    overflow: 'hidden',\r\n                                    textOverflow: 'ellipsis',\r\n                                    whiteSpace: 'nowrap',\r\n                                    mt: 0.5\r\n                                  }}\r\n                                >\r\n                                  {note.content?.substring(0, 60) || 'No content'}...\r\n                                </Typography>\r\n                              </CardContent>\r\n                            </Card>\r\n                          </Grid>\r\n                        ))}\r\n                      </Grid>\r\n                    </>\r\n                  )}\r\n                </CardContent>\r\n              </Collapse>\r\n            </Card>\r\n          );\r\n        })}\r\n      </List>\r\n\r\n      <Dialog open={deleteDialogOpen} onClose={() => setDeleteDialogOpen(false)}>\r\n        <DialogTitle>Delete Group</DialogTitle>\r\n        <DialogContent>\r\n          Are you sure you want to delete this group?\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setDeleteDialogOpen(false)}>Cancel</Button>\r\n          <Button onClick={handleDelete} color=\"error\">Delete</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog \r\n        open={addMemberDialogOpen} \r\n        onClose={() => {\r\n          setAddMemberDialogOpen(false);\r\n          setNewMemberEmail('');\r\n          setNewMemberNickname('');\r\n        }}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>Add Member</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"Email Address\"\r\n            type=\"email\"\r\n            fullWidth\r\n            value={newMemberEmail}\r\n            onChange={(e) => setNewMemberEmail(e.target.value)}\r\n            required\r\n            sx={{ mb: 2, mt: 2 }}\r\n          />\r\n          <TextField\r\n            margin=\"dense\"\r\n            label=\"Nickname (Optional)\"\r\n            fullWidth\r\n            value={newMemberNickname}\r\n            onChange={(e) => setNewMemberNickname(e.target.value)}\r\n            placeholder=\"Enter a nickname for this member\"\r\n            helperText=\"Leave empty to use their name\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button \r\n            onClick={() => {\r\n              setAddMemberDialogOpen(false);\r\n              setNewMemberEmail('');\r\n              setNewMemberNickname('');\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button \r\n            onClick={handleAddMember} \r\n            color=\"primary\"\r\n            disabled={!newMemberEmail.trim()}\r\n          >\r\n            Add\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default NoteGroupList; ","import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  Alert\r\n} from '@mui/material';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport groupsService from '../../services/groups';\r\n\r\nconst NoteGroupForm = ({ onSubmit, onCancel }) => {\r\n  const { user } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: ''\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!user?.$id) {\r\n      setError('Not authenticated');\r\n      return;\r\n    }\r\n    \r\n    if (!formData.name.trim()) {\r\n      setError('Group name is required');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const group = await groupsService.createGroup(user.$id, formData);\r\n      onSubmit(group);\r\n    } catch (err) {\r\n      console.error('Error creating group:', err);\r\n      setError(err?.message || 'Failed to create group');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box component=\"form\" onSubmit={handleSubmit}>\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n      <TextField\r\n        fullWidth\r\n        label=\"Group Name\"\r\n        name=\"name\"\r\n        value={formData.name}\r\n        onChange={handleChange}\r\n        required\r\n        sx={{ mb: 2 }}\r\n      />\r\n      <TextField\r\n        fullWidth\r\n        label=\"Description\"\r\n        name=\"description\"\r\n        value={formData.description}\r\n        onChange={handleChange}\r\n        multiline\r\n        rows={3}\r\n        sx={{ mb: 3 }}\r\n      />\r\n      <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 1 }}>\r\n        <Button onClick={onCancel}>\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          disabled={loading || !formData.name.trim()}\r\n        >\r\n          {loading ? 'Creating...' : 'Create Group'}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default NoteGroupForm; ","import React from 'react';\r\nimport { Card, CardContent, Skeleton, Box, Grid } from '@mui/material';\r\n\r\nexport const NoteCardSkeleton = () => (\r\n  <Card sx={{ mb: 2 }}>\r\n    <CardContent>\r\n      <Skeleton variant=\"text\" width=\"60%\" height={32} sx={{ mb: 1 }} />\r\n      <Skeleton variant=\"text\" width=\"100%\" height={20} />\r\n      <Skeleton variant=\"text\" width=\"80%\" height={20} />\r\n      <Box sx={{ display: 'flex', gap: 1, mt: 2 }}>\r\n        <Skeleton variant=\"rectangular\" width={60} height={24} />\r\n        <Skeleton variant=\"rectangular\" width={60} height={24} />\r\n      </Box>\r\n    </CardContent>\r\n  </Card>\r\n);\r\n\r\nexport const CardGridSkeleton = ({ count = 6 }) => (\r\n  <Grid container spacing={2}>\r\n    {Array.from({ length: count }).map((_, index) => (\r\n      <Grid item xs={12} sm={6} md={4} key={index}>\r\n        <Card>\r\n          <CardContent>\r\n            <Skeleton variant=\"text\" width=\"60%\" height={32} sx={{ mb: 1 }} />\r\n            <Skeleton variant=\"text\" width=\"100%\" height={20} />\r\n            <Skeleton variant=\"text\" width=\"80%\" height={20} />\r\n            <Box sx={{ display: 'flex', gap: 1, mt: 2 }}>\r\n              <Skeleton variant=\"rectangular\" width={60} height={24} />\r\n              <Skeleton variant=\"rectangular\" width={60} height={24} />\r\n            </Box>\r\n          </CardContent>\r\n        </Card>\r\n      </Grid>\r\n    ))}\r\n  </Grid>\r\n);\r\n\r\n","import React, { useState, useMemo, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  Typography,\r\n  IconButton,\r\n  Box,\r\n  Chip,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  TextField,\r\n  Tabs,\r\n  Tab,\r\n  Alert,\r\n  InputAdornment,\r\n  CircularProgress,\r\n  Paper\r\n} from '@mui/material';\r\nimport {\r\n  Edit as EditIcon,\r\n  Delete as DeleteIcon,\r\n  Share as ShareIcon,\r\n  Add as AddIcon,\r\n  Search as SearchIcon,\r\n  Folder as FolderIcon\r\n} from '@mui/icons-material';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useNotes, useDeleteNote } from '../hooks/useNotes';\r\nimport { useGroups, useCreateGroup, useDeleteGroup } from '../hooks/useGroups';\r\nimport NoteGroupList from './notes/NoteGroupList';\r\nimport NoteGroupForm from './notes/NoteGroupForm';\r\nimport { CardGridSkeleton } from './common/CardSkeleton';\r\nimport dayjs from 'dayjs';\r\n\r\n// Memoized Note Card Component\r\nconst NoteCard = React.memo(({ note, onEdit, onDelete, onShare }) => {\r\n  const preview = note.content?.substring(0, 150) || '';\r\n  const showReadMore = note.content?.length > 150;\r\n\r\n  return (\r\n    <Grid item xs={12} sm={6} md={4} key={note._id}>\r\n      <Card\r\n        sx={{\r\n          height: '100%',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          transition: 'all 0.2s ease-in-out',\r\n          '&:hover': {\r\n            boxShadow: 6,\r\n            transform: 'translateY(-4px)',\r\n          },\r\n        }}\r\n      >\r\n        <CardContent sx={{ flexGrow: 1, pb: 1 }}>\r\n          <Typography \r\n            variant=\"h6\" \r\n            gutterBottom\r\n            sx={{\r\n              fontWeight: 'medium',\r\n              mb: 1.5,\r\n              overflow: 'hidden',\r\n              textOverflow: 'ellipsis',\r\n              display: '-webkit-box',\r\n              WebkitLineClamp: 2,\r\n              WebkitBoxOrient: 'vertical'\r\n            }}\r\n          >\r\n            {note.title || 'Untitled Note'}\r\n          </Typography>\r\n          <Typography\r\n            variant=\"body2\"\r\n            color=\"text.secondary\"\r\n            sx={{\r\n              mb: 2,\r\n              overflow: 'hidden',\r\n              textOverflow: 'ellipsis',\r\n              display: '-webkit-box',\r\n              WebkitLineClamp: 3,\r\n              WebkitBoxOrient: 'vertical',\r\n              minHeight: '60px'\r\n            }}\r\n          >\r\n            {preview}\r\n            {showReadMore && '...'}\r\n          </Typography>\r\n          {note.tags && note.tags.length > 0 && (\r\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mb: 1 }}>\r\n              {note.tags.slice(0, 3).map((tag, index) => (\r\n                <Chip\r\n                  key={index}\r\n                  label={tag}\r\n                  size=\"small\"\r\n                  sx={{\r\n                    fontSize: '0.7rem',\r\n                    height: '24px',\r\n                    backgroundColor: 'primary.light',\r\n                    color: 'primary.contrastText',\r\n                  }}\r\n                />\r\n              ))}\r\n              {note.tags.length > 3 && (\r\n                <Chip\r\n                  label={`+${note.tags.length - 3}`}\r\n                  size=\"small\"\r\n                  sx={{ fontSize: '0.7rem', height: '24px' }}\r\n                />\r\n              )}\r\n            </Box>\r\n          )}\r\n          {note.createdAt && (\r\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 1 }}>\r\n              {dayjs(note.createdAt).format('MMM D, YYYY')}\r\n            </Typography>\r\n          )}\r\n        </CardContent>\r\n        <CardActions sx={{ px: 2, pb: 2, pt: 1 }}>\r\n          <IconButton\r\n            size=\"small\"\r\n            onClick={() => onEdit(note._id)}\r\n            sx={{\r\n              '&:hover': {\r\n                color: 'primary.main',\r\n                backgroundColor: 'action.hover'\r\n              }\r\n            }}\r\n            aria-label=\"Edit note\"\r\n          >\r\n            <EditIcon fontSize=\"small\" />\r\n          </IconButton>\r\n          <IconButton\r\n            size=\"small\"\r\n            onClick={() => onShare(note)}\r\n            sx={{\r\n              '&:hover': {\r\n                color: 'info.main',\r\n                backgroundColor: 'action.hover'\r\n              }\r\n            }}\r\n            aria-label=\"Share note\"\r\n          >\r\n            <ShareIcon fontSize=\"small\" />\r\n          </IconButton>\r\n          <IconButton\r\n            size=\"small\"\r\n            onClick={() => onDelete(note._id)}\r\n            sx={{\r\n              ml: 'auto',\r\n              '&:hover': {\r\n                color: 'error.main',\r\n                backgroundColor: 'error.lighter'\r\n              }\r\n            }}\r\n            aria-label=\"Delete note\"\r\n          >\r\n            <DeleteIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </CardActions>\r\n      </Card>\r\n    </Grid>\r\n  );\r\n});\r\n\r\nNoteCard.displayName = 'NoteCard';\r\n\r\nconst Dashboard = () => {\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const [shareDialogOpen, setShareDialogOpen] = useState(false);\r\n  const [selectedNote, setSelectedNote] = useState(null);\r\n  const [shareEmail, setShareEmail] = useState('');\r\n  const [sharePermission, setSharePermission] = useState('view');\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [groupDialogOpen, setGroupDialogOpen] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterType, setFilterType] = useState('all'); // all, personal, grouped\r\n\r\n  // React Query hooks - parallel fetching\r\n  const { data: notes = [], isLoading: notesLoading, error: notesError } = useNotes(user?.$id);\r\n  const { data: groups = [], isLoading: groupsLoading, error: groupsError } = useGroups(user?.$id);\r\n  const deleteNoteMutation = useDeleteNote();\r\n  const createGroupMutation = useCreateGroup();\r\n  const deleteGroupMutation = useDeleteGroup();\r\n\r\n  // Build group -> notes mapping\r\n  const groupNotesMap = useMemo(() => {\r\n    const map = {};\r\n    groups.forEach((g) => {\r\n      map[g._id] = notes.filter((n) => (n.group || n.groupId) === g._id);\r\n    });\r\n    return map;\r\n  }, [groups, notes]);\r\n\r\n  // Filter notes based on search and filter type\r\n  const filteredNotes = useMemo(() => {\r\n    let filtered = notes;\r\n\r\n    // Filter by type\r\n    if (filterType === 'personal') {\r\n      filtered = filtered.filter(note => !note.group && !note.groupId);\r\n    } else if (filterType === 'grouped') {\r\n      filtered = filtered.filter(note => note.group || note.groupId);\r\n    }\r\n\r\n    // Filter by search term\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      filtered = filtered.filter(note =>\r\n        note.title?.toLowerCase().includes(searchLower) ||\r\n        note.content?.toLowerCase().includes(searchLower) ||\r\n        note.tags?.some(tag => tag.toLowerCase().includes(searchLower))\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [notes, searchTerm, filterType]);\r\n\r\n  // Personal notes (not in groups)\r\n  const personalNotes = useMemo(() => {\r\n    return filteredNotes.filter(note => !note.group && !note.groupId);\r\n  }, [filteredNotes]);\r\n\r\n  const handleEditNote = useCallback((noteId) => {\r\n    navigate(`/notes/${noteId}`);\r\n  }, [navigate]);\r\n\r\n  const handleDeleteNote = useCallback(async (noteId) => {\r\n    if (!window.confirm('Are you sure you want to delete this note?')) {\r\n      return;\r\n    }\r\n    try {\r\n      await deleteNoteMutation.mutateAsync({ noteId, userId: user.$id });\r\n      setSuccess('Note deleted successfully');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Error deleting note:', error);\r\n      setError('Failed to delete note');\r\n      setTimeout(() => setError(''), 3000);\r\n    }\r\n  }, [deleteNoteMutation, user?.$id]);\r\n\r\n  const handleShareNote = useCallback((note) => {\r\n    setSelectedNote(note);\r\n    setShareDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleShareSubmit = useCallback(async () => {\r\n    // Sharing not yet implemented with Appwrite in this UI.\r\n    setShareDialogOpen(false);\r\n    setSuccess('Sharing not available yet');\r\n    setTimeout(() => setSuccess(''), 3000);\r\n  }, []);\r\n\r\n  const handleGroupSubmit = useCallback(async (groupData) => {\r\n    try {\r\n      await createGroupMutation.mutateAsync({ userId: user.$id, groupData });\r\n      setGroupDialogOpen(false);\r\n      setSuccess('Group created successfully');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (error) {\r\n      console.error('Error creating group:', error);\r\n      setError('Failed to create group');\r\n      setTimeout(() => setError(''), 3000);\r\n    }\r\n  }, [createGroupMutation, user?.$id]);\r\n\r\n  const handleTabChange = useCallback((event, newValue) => {\r\n    setActiveTab(newValue);\r\n  }, []);\r\n\r\n  const handleDeleteGroup = useCallback(async (groupId) => {\r\n    if (!window.confirm('Are you sure you want to delete this group?')) {\r\n      return;\r\n    }\r\n    try {\r\n      await deleteGroupMutation.mutateAsync({ groupId, userId: user.$id });\r\n      setSuccess('Group deleted successfully');\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    } catch (err) {\r\n      console.error('Delete error:', err);\r\n      setError('Failed to delete group');\r\n      setTimeout(() => setError(''), 3000);\r\n    }\r\n  }, [deleteGroupMutation, user?.$id]);\r\n\r\n  // Error handling\r\n  if (notesError || groupsError) {\r\n    setError('Failed to load data');\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError('')}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n      {success && (\r\n        <Alert severity=\"success\" sx={{ mb: 2 }} onClose={() => setSuccess('')}>\r\n          {success}\r\n        </Alert>\r\n      )}\r\n\r\n      <Tabs value={activeTab} onChange={handleTabChange} sx={{ mb: 3 }}>\r\n        <Tab label=\"My Notes\" />\r\n        <Tab label=\"Note Groups\" />\r\n      </Tabs>\r\n\r\n      <Box sx={{ mt: 2 }}>\r\n        {activeTab === 0 && (\r\n          <>\r\n            {/* Header with New Note button and Search/Filter */}\r\n            <Box sx={{ mb: 3, display: 'flex', flexDirection: { xs: 'column', sm: 'row' }, gap: 2, alignItems: { xs: 'stretch', sm: 'center' } }}>\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<AddIcon />}\r\n                onClick={() => navigate('/notes/new')}\r\n                sx={{ minWidth: { xs: '100%', sm: 'auto' } }}\r\n              >\r\n                New Note\r\n              </Button>\r\n              <TextField\r\n                fullWidth\r\n                placeholder=\"Search notes...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                InputProps={{\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <SearchIcon />\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                sx={{ maxWidth: { sm: '400px' } }}\r\n              />\r\n              <Box sx={{ display: 'flex', gap: 1 }}>\r\n                <Chip\r\n                  label=\"All\"\r\n                  onClick={() => setFilterType('all')}\r\n                  color={filterType === 'all' ? 'primary' : 'default'}\r\n                  clickable\r\n                />\r\n                <Chip\r\n                  label=\"Personal\"\r\n                  onClick={() => setFilterType('personal')}\r\n                  color={filterType === 'personal' ? 'primary' : 'default'}\r\n                  clickable\r\n                />\r\n                <Chip\r\n                  label=\"Grouped\"\r\n                  onClick={() => setFilterType('grouped')}\r\n                  color={filterType === 'grouped' ? 'primary' : 'default'}\r\n                  clickable\r\n                />\r\n              </Box>\r\n            </Box>\r\n\r\n            {/* Notes Grid */}\r\n            {notesLoading ? (\r\n              <CardGridSkeleton count={6} />\r\n            ) : personalNotes.length === 0 ? (\r\n              <Paper\r\n                sx={{\r\n                  p: 6,\r\n                  textAlign: 'center',\r\n                  backgroundColor: 'background.default',\r\n                  border: '2px dashed',\r\n                  borderColor: 'divider'\r\n                }}\r\n              >\r\n                <FolderIcon sx={{ fontSize: 64, color: 'text.secondary', mb: 2 }} />\r\n                <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\r\n                  {searchTerm || filterType !== 'all' ? 'No notes found' : 'No notes yet'}\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\r\n                  {searchTerm || filterType !== 'all' \r\n                    ? 'Try adjusting your search or filters'\r\n                    : 'Create your first note to get started'}\r\n                </Typography>\r\n                {!searchTerm && filterType === 'all' && (\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    startIcon={<AddIcon />}\r\n                    onClick={() => navigate('/notes/new')}\r\n                  >\r\n                    Create Note\r\n                  </Button>\r\n                )}\r\n              </Paper>\r\n            ) : (\r\n              <Grid container spacing={2}>\r\n                {personalNotes.map(note => (\r\n                  <NoteCard\r\n                    key={note._id}\r\n                    note={note}\r\n                    onEdit={handleEditNote}\r\n                    onDelete={handleDeleteNote}\r\n                    onShare={handleShareNote}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {activeTab === 1 && (\r\n          <Box>\r\n            <Box sx={{ mb: 2, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <Typography variant=\"h6\">Note Groups</Typography>\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<AddIcon />}\r\n                onClick={() => setGroupDialogOpen(true)}\r\n              >\r\n                Create Group\r\n              </Button>\r\n            </Box>\r\n            {groupsLoading ? (\r\n              <CircularProgress />\r\n            ) : groups.length === 0 ? (\r\n              <Paper\r\n                sx={{\r\n                  p: 6,\r\n                  textAlign: 'center',\r\n                  backgroundColor: 'background.default',\r\n                  border: '2px dashed',\r\n                  borderColor: 'divider'\r\n                }}\r\n              >\r\n                <FolderIcon sx={{ fontSize: 64, color: 'text.secondary', mb: 2 }} />\r\n                <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\r\n                  No groups yet\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\r\n                  Create a group to organize and share notes with others\r\n                </Typography>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  startIcon={<AddIcon />}\r\n                  onClick={() => setGroupDialogOpen(true)}\r\n                >\r\n                  Create Group\r\n                </Button>\r\n              </Paper>\r\n            ) : (\r\n              <NoteGroupList \r\n                groups={groups.map(g => ({\r\n                  ...g,\r\n                  noteCount: groupNotesMap[g._id || g.$id]?.length || 0\r\n                }))}\r\n                onUpdate={() => {}} // React Query handles updates automatically\r\n                onDelete={handleDeleteGroup}\r\n                groupNotesMap={groupNotesMap}\r\n              />\r\n            )}\r\n          </Box>\r\n        )}\r\n      </Box>\r\n\r\n      {/* Share Dialog */}\r\n      <Dialog\r\n        open={shareDialogOpen}\r\n        onClose={() => setShareDialogOpen(false)}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>Share Note</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"Email Address\"\r\n            type=\"email\"\r\n            fullWidth\r\n            value={shareEmail}\r\n            onChange={(e) => setShareEmail(e.target.value)}\r\n            sx={{ mb: 2 }}\r\n          />\r\n          <TextField\r\n            select\r\n            margin=\"dense\"\r\n            label=\"Permission\"\r\n            fullWidth\r\n            value={sharePermission}\r\n            onChange={(e) => setSharePermission(e.target.value)}\r\n            SelectProps={{\r\n              native: true\r\n            }}\r\n          >\r\n            <option value=\"view\">View</option>\r\n            <option value=\"edit\">Edit</option>\r\n          </TextField>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setShareDialogOpen(false)}>Cancel</Button>\r\n          <Button onClick={handleShareSubmit} color=\"primary\" variant=\"contained\">\r\n            Share\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Create Group Dialog */}\r\n      <Dialog\r\n        open={groupDialogOpen}\r\n        onClose={() => setGroupDialogOpen(false)}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>Create Note Group</DialogTitle>\r\n        <DialogContent>\r\n          <NoteGroupForm\r\n            onSubmit={handleGroupSubmit}\r\n            onCancel={() => setGroupDialogOpen(false)}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport notesDb from '../services/db';\r\n\r\nexport const useNotes = (userId) => {\r\n  return useQuery({\r\n    queryKey: ['notes', userId],\r\n    queryFn: async () => {\r\n      const resNotes = await notesDb.listNotes(userId);\r\n      return (resNotes?.documents || resNotes || []).map((d) => ({\r\n        _id: d.$id,\r\n        title: d.title || '',\r\n        content: d.content || '',\r\n        tags: d.tags || [],\r\n        group: d.groupId || null,\r\n        ownerId: d.ownerId,\r\n        owner: d.owner || null,\r\n        createdAt: d.createdAt,\r\n        updatedAt: d.updatedAt,\r\n      }));\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 2 * 60 * 1000, // 2 minutes\r\n  });\r\n};\r\n\r\nexport const useCreateNote = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({ userId, noteData }) => {\r\n      return await notesDb.createNote(userId, noteData);\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries(['notes', variables.userId]);\r\n    },\r\n  });\r\n};\r\n\r\nexport const useUpdateNote = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({ noteId, userId, noteData }) => {\r\n      return await notesDb.updateNote(noteId, userId, noteData);\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries(['notes', variables.userId]);\r\n    },\r\n  });\r\n};\r\n\r\nexport const useDeleteNote = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({ noteId, userId }) => {\r\n      return await notesDb.deleteNote(noteId, userId);\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries(['notes', variables.userId]);\r\n    },\r\n  });\r\n};\r\n\r\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport groupsService from '../services/groups';\r\n\r\nexport const useGroups = (userId) => {\r\n  return useQuery({\r\n    queryKey: ['groups', userId],\r\n    queryFn: async () => {\r\n      const groups = await groupsService.listGroups(userId);\r\n      return groups.map((g) => ({\r\n        _id: g.$id,\r\n        name: g.name || '',\r\n        description: g.description || '',\r\n        members: g.members || [],\r\n        membersWithInfo: g.membersWithInfo || [],\r\n        memberNicknames: g.memberNicknames || {},\r\n        ownerId: g.ownerId,\r\n      }));\r\n    },\r\n    enabled: !!userId,\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n  });\r\n};\r\n\r\nexport const useCreateGroup = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({ userId, groupData }) => {\r\n      return await groupsService.createGroup(userId, groupData);\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries(['groups', variables.userId]);\r\n    },\r\n  });\r\n};\r\n\r\nexport const useDeleteGroup = () => {\r\n  const queryClient = useQueryClient();\r\n  \r\n  return useMutation({\r\n    mutationFn: async ({ groupId, userId }) => {\r\n      return await groupsService.deleteGroup(groupId);\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      queryClient.invalidateQueries(['groups', variables.userId]);\r\n    },\r\n  });\r\n};\r\n\r\n","import { databases } from '../appwrite';\r\nimport { Query, Permission, Role } from 'appwrite';\r\n\r\nconst DATABASE_ID = process.env.REACT_APP_APPWRITE_DATABASE_ID || 'YOUR_DATABASE_ID';\r\nconst NOTES_COLLECTION_ID = process.env.REACT_APP_APPWRITE_COLLECTION_NOTES || 'YOUR_NOTES_COLLECTION_ID';\r\n\r\n/**\r\n * Create a note belonging to a user.\r\n * @param {string} userId - Appwrite user id (account.$id)\r\n * @param {object} note - { title, content, groupId?, pinned?, ... }\r\n */\r\nexport async function createNote(userId, note) {\r\n  const permissions = [\r\n    Permission.read(Role.user(userId)),\r\n    Permission.update(Role.user(userId)),\r\n    Permission.delete(Role.user(userId)),\r\n    Permission.write(Role.user(userId)),\r\n  ];\r\n  try {\r\n    return await databases.createDocument(\r\n      DATABASE_ID,\r\n      NOTES_COLLECTION_ID,\r\n      'unique()',\r\n      { ...note, ownerId: userId },\r\n      permissions\r\n    );\r\n  } catch (err) {\r\n    const msg = err?.message || err?.response?.message || '';\r\n    const code = err?.code || err?.response?.code;\r\n    // If collection is using collection-level permissions, Appwrite rejects the permissions param\r\n    if (String(msg).toLowerCase().includes('permissions') || code === 400) {\r\n      // Retry without explicit document permissions\r\n      return databases.createDocument(\r\n        DATABASE_ID,\r\n        NOTES_COLLECTION_ID,\r\n        'unique()',\r\n        { ...note, ownerId: userId }\r\n      );\r\n    }\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * List notes for a user.\r\n * @param {string} userId\r\n */\r\nexport async function listNotes(userId) {\r\n  try {\r\n    const response = await databases.listDocuments(\r\n      DATABASE_ID,\r\n      NOTES_COLLECTION_ID,\r\n      [Query.equal('ownerId', userId)]\r\n    );\r\n    const notes = response.documents || [];\r\n    \r\n    // Enrich notes with owner profile information\r\n    const PROFILES_COLLECTION_ID = process.env.REACT_APP_APPWRITE_COLLECTION_PROFILES || '6918f632002d42536ab2';\r\n    const enrichedNotes = await Promise.all(notes.map(async (note) => {\r\n      if (!note.ownerId) {\r\n        return note;\r\n      }\r\n      \r\n      try {\r\n        const profiles = await databases.listDocuments(\r\n          DATABASE_ID,\r\n          PROFILES_COLLECTION_ID,\r\n          [Query.equal('userId', note.ownerId)]\r\n        );\r\n        \r\n        if (profiles.documents && profiles.documents.length > 0) {\r\n          const profile = profiles.documents[0];\r\n          return {\r\n            ...note,\r\n            owner: {\r\n              name: profile.name || profile.email || 'Unknown',\r\n              email: profile.email || ''\r\n            }\r\n          };\r\n        }\r\n        return {\r\n          ...note,\r\n          owner: {\r\n            name: 'Unknown User',\r\n            email: ''\r\n          }\r\n        };\r\n      } catch (err) {\r\n        console.warn(`Failed to fetch profile for owner ${note.ownerId}:`, err);\r\n        return {\r\n          ...note,\r\n          owner: {\r\n            name: 'Unknown User',\r\n            email: ''\r\n          }\r\n        };\r\n      }\r\n    }));\r\n    \r\n    return enrichedNotes;\r\n  } catch (err) {\r\n    // Fallback when the attribute isn't in schema yet\r\n    try {\r\n      const res = await databases.listDocuments(DATABASE_ID, NOTES_COLLECTION_ID);\r\n      res.documents = (res.documents || []).filter((d) => d.ownerId === userId);\r\n      return res;\r\n    } catch (e) {\r\n      throw err;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Update a note. Note owner should be used to set permissions.\r\n * @param {string} documentId\r\n * @param {string} userId\r\n * @param {object} data\r\n */\r\nexport async function updateNote(documentId, userId, data) {\r\n  return databases.updateDocument(\r\n    DATABASE_ID,\r\n    NOTES_COLLECTION_ID,\r\n    documentId,\r\n    data\r\n  );\r\n}\r\n\r\n/**\r\n * Delete a note document.\r\n * @param {string} documentId\r\n */\r\nexport async function deleteNote(documentId) {\r\n  return databases.deleteDocument(\r\n    DATABASE_ID,\r\n    NOTES_COLLECTION_ID,\r\n    documentId\r\n  );\r\n}\r\n\r\nexport default {\r\n  createNote,\r\n  listNotes,\r\n  updateNote,\r\n  deleteNote,\r\n};\r\n","import { databases } from '../appwrite';\r\nimport { Query, ID, Permission, Role } from 'appwrite';\r\n\r\nconst DATABASE_ID = process.env.REACT_APP_APPWRITE_DATABASE_ID || '69181c670024df0dd32b';\r\nconst GROUPS_COLLECTION_ID = process.env.REACT_APP_APPWRITE_COLLECTION_GROUPS || '6918f637002e49bd5482';\r\n\r\nexport async function listGroups(userId = null) {\r\n  try {\r\n    const queries = [];\r\n    // Filter by type='note' to distinguish from password groups\r\n    // Also include groups without type (for backward compatibility)\r\n    queries.push(Query.or([\r\n      Query.equal('type', 'note'),\r\n      Query.isNull('type')\r\n    ]));\r\n    if (userId) {\r\n      queries.push(Query.equal('ownerId', userId));\r\n    }\r\n    const res = await databases.listDocuments(DATABASE_ID, GROUPS_COLLECTION_ID, queries);\r\n    const groups = res.documents || [];\r\n    \r\n    // Enrich members with profile information\r\n    const PROFILES_COLLECTION_ID = process.env.REACT_APP_APPWRITE_COLLECTION_PROFILES || '6918f632002d42536ab2';\r\n    const enrichedGroups = await Promise.all(groups.map(async (group) => {\r\n      if (!group.members || !Array.isArray(group.members)) {\r\n        return { ...group, membersWithInfo: [] };\r\n      }\r\n      \r\n      // Parse member nicknames\r\n      let memberNicknames = {};\r\n      try {\r\n        memberNicknames = group.memberNicknames ? JSON.parse(group.memberNicknames) : {};\r\n      } catch (e) {\r\n        memberNicknames = {};\r\n      }\r\n      \r\n      // Fetch profiles for all member IDs\r\n      const memberProfiles = await Promise.all(\r\n        group.members.map(async (memberId) => {\r\n          try {\r\n            const profiles = await databases.listDocuments(\r\n              DATABASE_ID,\r\n              PROFILES_COLLECTION_ID,\r\n              [Query.equal('userId', memberId)]\r\n            );\r\n            \r\n            if (profiles.documents && profiles.documents.length > 0) {\r\n              const profile = profiles.documents[0];\r\n              return {\r\n                userId: memberId,\r\n                name: profile.name || profile.email || 'Unknown',\r\n                email: profile.email || '',\r\n                nickname: memberNicknames[memberId] || ''\r\n              };\r\n            }\r\n            return {\r\n              userId: memberId,\r\n              name: 'Unknown User',\r\n              email: '',\r\n              nickname: memberNicknames[memberId] || ''\r\n            };\r\n          } catch (err) {\r\n            console.warn(`Failed to fetch profile for ${memberId}:`, err);\r\n            return {\r\n              userId: memberId,\r\n              name: 'Unknown User',\r\n              email: '',\r\n              nickname: memberNicknames[memberId] || ''\r\n            };\r\n          }\r\n        })\r\n      );\r\n      \r\n      return { ...group, membersWithInfo: memberProfiles };\r\n    }));\r\n    \r\n    return enrichedGroups;\r\n  } catch (err) {\r\n    console.warn('Failed to fetch groups:', err);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function createGroup(userId, groupData) {\r\n  try {\r\n    const { name, description } = groupData;\r\n    if (!name) {\r\n      throw new Error('Group name is required');\r\n    }\r\n    \r\n    // Set document permissions: owner can read/write, all users can read\r\n    const permissions = [\r\n      Permission.read(Role.user(userId)), // Owner can read\r\n      Permission.update(Role.user(userId)), // Owner can update\r\n      Permission.delete(Role.user(userId)), // Owner can delete\r\n      Permission.read(Role.users()) // All authenticated users can read (for listing)\r\n    ];\r\n    \r\n    const document = await databases.createDocument(\r\n      DATABASE_ID,\r\n      GROUPS_COLLECTION_ID,\r\n      ID.unique(),\r\n      {\r\n        ownerId: userId,\r\n        name: name.trim(),\r\n        description: description || '',\r\n        members: [], // Start with empty members array\r\n        memberNicknames: '{}', // JSON string for member nicknames\r\n        type: 'note' // Distinguish from password groups\r\n      },\r\n      permissions\r\n    );\r\n    return document;\r\n  } catch (err) {\r\n    console.error('Failed to create group:', err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport async function addMemberToGroup(groupId, userEmail, nickname = '') {\r\n  try {\r\n    // First, get the group\r\n    const group = await databases.getDocument(DATABASE_ID, GROUPS_COLLECTION_ID, groupId);\r\n    \r\n    // Find user by email from profiles\r\n    const PROFILES_COLLECTION_ID = process.env.REACT_APP_APPWRITE_COLLECTION_PROFILES || '6918f632002d42536ab2';\r\n    const profiles = await databases.listDocuments(\r\n      DATABASE_ID,\r\n      PROFILES_COLLECTION_ID,\r\n      [Query.equal('email', userEmail.toLowerCase())]\r\n    );\r\n    \r\n    if (!profiles.documents || profiles.documents.length === 0) {\r\n      throw new Error('User not found with that email');\r\n    }\r\n    \r\n    const userProfile = profiles.documents[0];\r\n    const userId = userProfile.userId;\r\n    \r\n    // Get current members (array of user IDs) and nicknames (JSON object)\r\n    const currentMembers = group.members || [];\r\n    let memberNicknames = {};\r\n    try {\r\n      memberNicknames = group.memberNicknames ? JSON.parse(group.memberNicknames) : {};\r\n    } catch (e) {\r\n      memberNicknames = {};\r\n    }\r\n    \r\n    // Check if user is already a member\r\n    if (currentMembers.includes(userId)) {\r\n      throw new Error('User is already a member of this group');\r\n    }\r\n    \r\n    // Add user ID to members array and nickname to nicknames object\r\n    const updatedMembers = [...currentMembers, userId];\r\n    if (nickname.trim()) {\r\n      memberNicknames[userId] = nickname.trim();\r\n    }\r\n    \r\n    // Update the group with proper permissions\r\n    const permissions = [\r\n      Permission.read(Role.user(group.ownerId)), // Owner can read\r\n      Permission.update(Role.user(group.ownerId)), // Owner can update\r\n      Permission.delete(Role.user(group.ownerId)), // Owner can delete\r\n      Permission.read(Role.users()) // All authenticated users can read\r\n    ];\r\n    \r\n    return await databases.updateDocument(\r\n      DATABASE_ID,\r\n      GROUPS_COLLECTION_ID,\r\n      groupId,\r\n      {\r\n        members: updatedMembers,\r\n        memberNicknames: JSON.stringify(memberNicknames)\r\n      },\r\n      permissions\r\n    );\r\n  } catch (err) {\r\n    console.error('Failed to add member:', err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport async function removeMemberFromGroup(groupId, userId) {\r\n  try {\r\n    const group = await databases.getDocument(DATABASE_ID, GROUPS_COLLECTION_ID, groupId);\r\n    const currentMembers = group.members || [];\r\n    const updatedMembers = currentMembers.filter(m => m !== userId);\r\n    \r\n    // Remove nickname if exists\r\n    let memberNicknames = {};\r\n    try {\r\n      memberNicknames = group.memberNicknames ? JSON.parse(group.memberNicknames) : {};\r\n    } catch (e) {\r\n      memberNicknames = {};\r\n    }\r\n    delete memberNicknames[userId];\r\n    \r\n    const permissions = [\r\n      Permission.read(Role.user(group.ownerId)),\r\n      Permission.update(Role.user(group.ownerId)),\r\n      Permission.delete(Role.user(group.ownerId)),\r\n      Permission.read(Role.users())\r\n    ];\r\n    \r\n    return await databases.updateDocument(\r\n      DATABASE_ID,\r\n      GROUPS_COLLECTION_ID,\r\n      groupId,\r\n      {\r\n        members: updatedMembers,\r\n        memberNicknames: JSON.stringify(memberNicknames)\r\n      },\r\n      permissions\r\n    );\r\n  } catch (err) {\r\n    console.error('Failed to remove member:', err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport async function deleteGroup(documentId) {\r\n  try {\r\n    return await databases.deleteDocument(DATABASE_ID, GROUPS_COLLECTION_ID, documentId);\r\n  } catch (err) {\r\n    console.error('Failed to delete group:', err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport default { listGroups, createGroup, addMemberToGroup, removeMemberFromGroup, deleteGroup };\r\n"],"names":["_ref","groups","onUpdate","onDelete","groupNotesMap","navigate","useNavigate","deleteDialogOpen","setDeleteDialogOpen","useState","selectedGroup","setSelectedGroup","addMemberDialogOpen","setAddMemberDialogOpen","newMemberEmail","setNewMemberEmail","newMemberNickname","setNewMemberNickname","error","setError","success","setSuccess","expandedGroups","setExpandedGroups","_jsxs","Box","children","_jsx","Alert","severity","sx","mb","List","Array","isArray","map","group","groupId","_id","$id","groupNotes","isExpanded","noteCount","length","Card","ListItem","ListItemText","primary","display","alignItems","gap","Typography","variant","name","Chip","label","size","color","icon","NotesIcon","secondaryTypographyProps","component","secondary","description","mt","flexWrap","membersWithInfo","member","index","displayName","nickname","email","async","userId","groupsService","setTimeout","err","console","message","handleRemoveMember","deleteIcon","PersonRemoveIcon","title","ListItemSecondaryAction","IconButton","edge","onClick","prev","toggleGroupExpanded","mr","ExpandLessIcon","ExpandMoreIcon","handleAddMemberClick","PersonAddIcon","handleDeleteClick","DeleteIcon","Collapse","in","timeout","unmountOnExit","CardContent","pt","textAlign","py","gutterBottom","Button","startIcon","_Fragment","justifyContent","Grid","container","spacing","note","_note$content","item","xs","sm","cursor","backgroundColor","p","pb","noWrap","overflow","textOverflow","whiteSpace","content","substring","Dialog","open","onClose","DialogTitle","DialogContent","DialogActions","maxWidth","fullWidth","TextField","autoFocus","margin","type","value","onChange","e","target","required","placeholder","helperText","trim","disabled","onSubmit","onCancel","user","useAuth","formData","setFormData","loading","setLoading","handleChange","preventDefault","multiline","rows","CardGridSkeleton","count","from","_","md","Skeleton","width","height","NoteCard","React","_note$content2","onEdit","onShare","preview","showReadMore","flexDirection","transition","boxShadow","transform","flexGrow","fontWeight","WebkitLineClamp","WebkitBoxOrient","minHeight","tags","slice","tag","fontSize","createdAt","dayjs","format","CardActions","px","EditIcon","ShareIcon","ml","Dashboard","shareDialogOpen","setShareDialogOpen","selectedNote","setSelectedNote","shareEmail","setShareEmail","sharePermission","setSharePermission","activeTab","setActiveTab","groupDialogOpen","setGroupDialogOpen","searchTerm","setSearchTerm","filterType","setFilterType","data","notes","isLoading","notesLoading","notesError","useQuery","queryKey","queryFn","resNotes","notesDb","documents","d","ownerId","owner","updatedAt","enabled","staleTime","groupsLoading","groupsError","useGroups","deleteNoteMutation","useDeleteNote","queryClient","useQueryClient","useMutation","mutationFn","noteId","_ref3","onSuccess","variables","invalidateQueries","createGroupMutation","useCreateGroup","deleteGroupMutation","useDeleteGroup","useMemo","forEach","g","filter","n","filteredNotes","filtered","searchLower","toLowerCase","_note$title","_note$content3","_note$tags","includes","some","personalNotes","handleEditNote","useCallback","handleDeleteNote","window","confirm","mutateAsync","handleShareNote","handleShareSubmit","handleGroupSubmit","groupData","handleTabChange","event","newValue","handleDeleteGroup","Tabs","Tab","AddIcon","minWidth","InputProps","startAdornment","InputAdornment","position","SearchIcon","clickable","Paper","border","borderColor","FolderIcon","CircularProgress","NoteGroupList","_groupNotesMap","select","SelectProps","native","NoteGroupForm","members","memberNicknames","_ref2","DATABASE_ID","process","NOTES_COLLECTION_ID","createNote","permissions","Permission","read","Role","update","delete","write","databases","createDocument","_err$response","_err$response2","msg","response","code","String","listNotes","listDocuments","Query","equal","PROFILES_COLLECTION_ID","Promise","all","profiles","profile","warn","res","updateNote","documentId","updateDocument","deleteNote","deleteDocument","GROUPS_COLLECTION_ID","listGroups","arguments","undefined","queries","push","or","isNull","JSON","parse","memberProfiles","memberId","createGroup","Error","users","ID","unique","addMemberToGroup","userEmail","getDocument","currentMembers","updatedMembers","stringify","removeMemberFromGroup","m","deleteGroup"],"sourceRoot":""}